(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87316,e=>{"use strict";let t=(0,e.i(75254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},72520,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],72520)},78894,e=>{"use strict";let t=(0,e.i(75254).default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],78894)},69638,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},42140,e=>{"use strict";var t=e.i(47167);let r="email_notifications",a="notification_settings",o={getSettings:()=>{t.default.env.ADMIN_EMAIL;try{let e=localStorage.getItem(a);return e?JSON.parse(e):{enableLowStockAlerts:!0,emailRecipients:["yuganshvthacker@gmail.com"],alertThreshold:100,checkInterval:24}}catch{return{enableLowStockAlerts:!0,emailRecipients:["yuganshvthacker@gmail.com"],alertThreshold:100,checkInterval:24}}},saveSettings:e=>{try{localStorage.setItem(a,JSON.stringify(e))}catch{console.error("Failed to save notification settings")}},getNotifications:()=>{try{let e=localStorage.getItem(r);return e?JSON.parse(e):[]}catch{return[]}},saveNotifications:e=>{try{localStorage.setItem(r,JSON.stringify(e))}catch{console.error("Failed to save notifications")}},createLowStockAlert:(e,t)=>{let r=e.filter(e=>{if(!e.reorderLevel)return!1;let r=e.reorderLevel*(t.alertThreshold/100);return e.stock<=r});if(0===r.length)return[];let a=[];return t.emailRecipients.forEach(e=>{let t={id:`alert-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,recipient:e,subject:`ðŸš¨ Low Stock Alert - ${r.length} Products Need Attention`,body:`
LOW STOCK ALERT
===============

The following products are running low and need to be restocked:

${r.map(e=>`â€¢ ${e.name} (${e.sku})
    Current Stock: ${e.stock} ${e.uom}
    Reorder Level: ${e.reorderLevel} ${e.uom}
    Category: ${e.category}`).join("\n\n")}

Please review and place orders as needed.

---
This is an automated alert from StockMaster Inventory Management System
Generated on: ${new Date().toLocaleString()}
        `,status:"pending",createdAt:new Date().toISOString()};a.push(t)}),a},sendAlert:async e=>{try{let t=e.body.match(/â€¢ (.+?) \((.+?)\)\s+Current Stock: (.+?) (.+?)\s+Reorder Level: (.+?) (.+?)\s+Category: (.+?)$/gm),r=[];t&&(r=t.map(e=>{let t=e.match(/â€¢ (.+?) \((.+?)\)\s+Current Stock: (.+?) (.+?)\s+Reorder Level: (.+?) (.+?)\s+Category: (.+?)$/);return t?{name:t[1],sku:t[2],stock:parseInt(t[3])||0,uom:t[4],reorderLevel:parseInt(t[5])||0,category:t[7]}:null}).filter(Boolean));try{if((await fetch("/api/notifications/send-alert",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipient:e.recipient,products:r})})).ok)return e.status="sent",e.sentAt=new Date().toISOString(),!0;return e.status="failed",!1}catch(t){return console.error("Failed to send email alert via API:",t),e.status="failed",!1}}catch(t){return console.error("Failed to send email alert:",t),e.status="failed",!1}},checkAndSendAlerts:async e=>{let t=o.getSettings();if(!t.enableLowStockAlerts)return;if(t.lastCheck){let e=new Date(t.lastCheck);if((new Date().getTime()-e.getTime())/36e5<t.checkInterval)return}let r=o.createLowStockAlert(e,t);if(0===r.length){t.lastCheck=new Date().toISOString(),o.saveSettings(t);return}let a=o.getNotifications();for(let e of r)await o.sendAlert(e),a.push(e);o.saveNotifications(a),t.lastCheck=new Date().toISOString(),o.saveSettings(t)}};e.s(["notificationService",0,o])}]);