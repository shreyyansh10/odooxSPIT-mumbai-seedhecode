(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75261,e=>{"use strict";var t=e.i(43476),s=e.i(73866),r=e.i(70065),a=e.i(67881),l=e.i(23750),d=e.i(7233),n=e.i(55436),c=e.i(71645),o=e.i(10708),i=e.i(62870),x=e.i(37727);function m({onClose:e}){let{products:r,locations:d,addAdjustment:n,addLedgerEntry:m,updateLocationStock:u}=(0,s.useStore)(),[h,j]=(0,c.useState)(""),[b,g]=(0,c.useState)(""),[p,f]=(0,c.useState)(""),[N,v]=(0,c.useState)(0),[y,S]=(0,c.useState)(""),C=r.find(e=>e.id===h),w=C?.locationStock[b]||0,k=N-w;return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg w-full max-w-md",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Create Adjustment"}),(0,t.jsx)("button",{onClick:e,className:"p-1 hover:bg-secondary rounded-lg transition-colors",children:(0,t.jsx)(x.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(o.Label,{htmlFor:"product",className:"text-sm font-medium text-foreground mb-2",children:"Product"}),(0,t.jsxs)(i.Select,{value:h,onValueChange:j,children:[(0,t.jsx)(i.SelectTrigger,{id:"product",children:(0,t.jsx)(i.SelectValue,{placeholder:"Select product"})}),(0,t.jsx)(i.SelectContent,{children:r.map(e=>(0,t.jsxs)(i.SelectItem,{value:e.id,children:[e.name," (Current: ",e.stock,")"]},e.id))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.Label,{htmlFor:"location",className:"text-sm font-medium text-foreground mb-2",children:"Location"}),(0,t.jsxs)(i.Select,{value:b,onValueChange:g,children:[(0,t.jsx)(i.SelectTrigger,{id:"location",children:(0,t.jsx)(i.SelectValue,{placeholder:"Select location"})}),(0,t.jsx)(i.SelectContent,{children:d.map(e=>(0,t.jsx)(i.SelectItem,{value:e.name,children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.Label,{htmlFor:"reason",className:"text-sm font-medium text-foreground mb-2",children:"Reason for Adjustment"}),(0,t.jsxs)(i.Select,{value:p,onValueChange:f,children:[(0,t.jsx)(i.SelectTrigger,{id:"reason",children:(0,t.jsx)(i.SelectValue,{placeholder:"Select reason"})}),(0,t.jsxs)(i.SelectContent,{children:[(0,t.jsx)(i.SelectItem,{value:"Damage/Loss",children:"Damage/Loss"}),(0,t.jsx)(i.SelectItem,{value:"Inventory Count",children:"Inventory Count"}),(0,t.jsx)(i.SelectItem,{value:"Expired Stock",children:"Expired Stock"}),(0,t.jsx)(i.SelectItem,{value:"Quality Check",children:"Quality Check"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(o.Label,{htmlFor:"current",className:"text-sm font-medium text-foreground mb-2",children:"Current Qty"}),(0,t.jsx)(l.Input,{id:"current",type:"number",value:w,disabled:!0,className:"bg-secondary/50"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.Label,{htmlFor:"counted",className:"text-sm font-medium text-foreground mb-2",children:"Counted Qty"}),(0,t.jsx)(l.Input,{id:"counted",type:"number",value:N,onChange:e=>v(Number.parseInt(e.target.value)||0),placeholder:"0"})]})]}),0!==k&&(0,t.jsxs)("div",{className:`p-3 rounded-lg text-sm font-medium ${k>0?"bg-green-500/20 text-green-600 dark:text-green-400":"bg-red-500/20 text-red-600 dark:text-red-400"}`,children:["Variance: ",k>0?"+":"",k]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-border",children:[(0,t.jsx)(a.Button,{type:"button",variant:"outline",onClick:e,className:"flex-1 bg-transparent",children:"Cancel"}),(0,t.jsx)(a.Button,{type:"button",onClick:()=>{if(!h||!b||!p)return void alert("Please fill in all required fields");let t=n({date:new Date().toISOString().split("T")[0],location:b,status:"Done",items:[{productId:h,countedQuantity:N,variance:k}],reason:p,notes:y});u(h,b,N,"set"),m({date:new Date().toISOString().split("T")[0],type:"adjustment",referenceId:t,productId:h,quantity:k,toLocation:b,notes:`Adjustment: ${p} - Variance: ${k}`}),alert("Adjustment created successfully!"),e()},className:"flex-1",children:"Create Adjustment"})]})]})]})})}var u=e.i(94179);function h(){let{adjustments:e}=(0,s.useStore)(),[o,i]=(0,c.useState)(""),[x,h]=(0,c.useState)(!1),j=e.filter(e=>e.id.toLowerCase().includes(o.toLowerCase())||e.reason.toLowerCase().includes(o.toLowerCase())),b={total:e.length,done:e.filter(e=>"Done"===e.status).length,draft:e.filter(e=>"Draft"===e.status).length,totalVariance:e.reduce((e,t)=>e+t.items.reduce((e,t)=>e+t.variance,0),0)};return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Adjustments"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:"Stock count corrections and discrepancies"})]}),(0,t.jsxs)(a.Button,{onClick:()=>h(!0),className:"gap-2",children:[(0,t.jsx)(d.Plus,{className:"w-4 h-4"}),"New Adjustment"]})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,t.jsxs)(r.Card,{className:"p-4 border border-border bg-card/50",children:[(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"Total Adjustments"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-foreground mt-1",children:b.total})]}),(0,t.jsxs)(r.Card,{className:"p-4 border border-border bg-card/50",children:[(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"Completed"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:b.done})]}),(0,t.jsxs)(r.Card,{className:"p-4 border border-border bg-card/50",children:[(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"Draft"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:b.draft})]}),(0,t.jsxs)(r.Card,{className:"p-4 border border-border bg-card/50",children:[(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"Total Variance"}),(0,t.jsxs)("p",{className:`text-2xl font-bold mt-1 ${b.totalVariance<0?"text-destructive":"text-green-600 dark:text-green-400"}`,children:[b.totalVariance>0?"+":"",b.totalVariance]})]})]}),(0,t.jsxs)(r.Card,{className:"p-6 border border-border bg-card/50",children:[(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)("div",{className:"flex-1 relative max-w-sm",children:[(0,t.jsx)(n.Search,{className:"absolute left-3 top-3 w-5 h-5 text-muted-foreground"}),(0,t.jsx)(l.Input,{placeholder:"Search by adjustment ID or reason...",value:o,onChange:e=>i(e.target.value),className:"pl-10"})]})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-border",children:[(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Adjustment ID"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Reason"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Location"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Variance"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Date"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Status"})]})}),(0,t.jsx)("tbody",{children:j.length>0?j.map(e=>(0,t.jsxs)("tr",{className:"border-b border-border hover:bg-secondary/50 transition-colors",children:[(0,t.jsx)("td",{className:"py-3 px-4 font-mono text-xs",children:e.id.slice(0,8)}),(0,t.jsx)("td",{className:"py-3 px-4",children:e.reason}),(0,t.jsx)("td",{className:"py-3 px-4",children:e.location}),(0,t.jsxs)("td",{className:"py-3 px-4",children:[e.items.reduce((e,t)=>e+t.variance,0)>0?"+":"",e.items.reduce((e,t)=>e+t.variance,0)]}),(0,t.jsx)("td",{className:"py-3 px-4 text-muted-foreground",children:e.date}),(0,t.jsx)("td",{className:"py-3 px-4",children:(0,t.jsx)(u.Badge,{variant:"secondary",className:(e=>{switch(e){case"Done":return"bg-green-500/20 text-green-600 dark:text-green-400";case"Draft":return"bg-yellow-500/20 text-yellow-600 dark:text-yellow-400";case"Canceled":return"bg-red-500/20 text-red-600 dark:text-red-400";default:return"bg-gray-500/20 text-gray-600 dark:text-gray-400"}})(e.status),children:e.status})})]},e.id)):(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:6,className:"py-8 text-center text-muted-foreground",children:"No adjustments found"})})})]})})]}),x&&(0,t.jsx)(m,{onClose:()=>h(!1)})]})}e.s(["default",()=>h],75261)}]);