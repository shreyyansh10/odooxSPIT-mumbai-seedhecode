(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var t=e.i(43476),r=e.i(47163);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}e.s(["Card",()=>a])},23750,e=>{"use strict";var t=e.i(43476),r=e.i(47163);function a({className:e,type:a,...i}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...i})}e.s(["Input",()=>a])},99682,e=>{"use strict";var t=e.i(71645);function r(e){let r=t.useRef({value:e,previous:e});return t.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}e.s(["usePrevious",()=>r])},7233,e=>{"use strict";let t=(0,e.i(75254).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],27612)},81947,63209,e=>{"use strict";var t=e.i(43476),r=e.i(25913),a=e.i(47163);let i=(0,r.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function s({className:e,variant:r,...s}){return(0,t.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,a.cn)(i({variant:r}),e),...s})}e.s(["Alert",()=>s],81947);let n=(0,e.i(75254).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>n],63209)},92930,e=>{"use strict";let t=(0,e.i(75254).default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["Edit2",()=>t],92930)},78894,e=>{"use strict";let t=(0,e.i(75254).default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],78894)},42140,e=>{"use strict";var t=e.i(47167);let r="email_notifications",a="notification_settings",i={getSettings:()=>{t.default.env.ADMIN_EMAIL;try{let e=localStorage.getItem(a);return e?JSON.parse(e):{enableLowStockAlerts:!0,emailRecipients:["yuganshvthacker@gmail.com"],alertThreshold:100,checkInterval:24}}catch{return{enableLowStockAlerts:!0,emailRecipients:["yuganshvthacker@gmail.com"],alertThreshold:100,checkInterval:24}}},saveSettings:e=>{try{localStorage.setItem(a,JSON.stringify(e))}catch{console.error("Failed to save notification settings")}},getNotifications:()=>{try{let e=localStorage.getItem(r);return e?JSON.parse(e):[]}catch{return[]}},saveNotifications:e=>{try{localStorage.setItem(r,JSON.stringify(e))}catch{console.error("Failed to save notifications")}},createLowStockAlert:(e,t)=>{let r=e.filter(e=>{if(!e.reorderLevel)return!1;let r=e.reorderLevel*(t.alertThreshold/100);return e.stock<=r});if(0===r.length)return[];let a=[];return t.emailRecipients.forEach(e=>{let t={id:`alert-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,recipient:e,subject:`ðŸš¨ Low Stock Alert - ${r.length} Products Need Attention`,body:`
LOW STOCK ALERT
===============

The following products are running low and need to be restocked:

${r.map(e=>`â€¢ ${e.name} (${e.sku})
    Current Stock: ${e.stock} ${e.uom}
    Reorder Level: ${e.reorderLevel} ${e.uom}
    Category: ${e.category}`).join("\n\n")}

Please review and place orders as needed.

---
This is an automated alert from StockMaster Inventory Management System
Generated on: ${new Date().toLocaleString()}
        `,status:"pending",createdAt:new Date().toISOString()};a.push(t)}),a},sendAlert:async e=>{try{let t=e.body.match(/â€¢ (.+?) \((.+?)\)\s+Current Stock: (.+?) (.+?)\s+Reorder Level: (.+?) (.+?)\s+Category: (.+?)$/gm),r=[];t&&(r=t.map(e=>{let t=e.match(/â€¢ (.+?) \((.+?)\)\s+Current Stock: (.+?) (.+?)\s+Reorder Level: (.+?) (.+?)\s+Category: (.+?)$/);return t?{name:t[1],sku:t[2],stock:parseInt(t[3])||0,uom:t[4],reorderLevel:parseInt(t[5])||0,category:t[7]}:null}).filter(Boolean));try{if((await fetch("/api/notifications/send-alert",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipient:e.recipient,products:r})})).ok)return e.status="sent",e.sentAt=new Date().toISOString(),!0;return e.status="failed",!1}catch(t){return console.error("Failed to send email alert via API:",t),e.status="failed",!1}}catch(t){return console.error("Failed to send email alert:",t),e.status="failed",!1}},checkAndSendAlerts:async e=>{let t=i.getSettings();if(!t.enableLowStockAlerts)return;if(t.lastCheck){let e=new Date(t.lastCheck);if((new Date().getTime()-e.getTime())/36e5<t.checkInterval)return}let r=i.createLowStockAlert(e,t);if(0===r.length){t.lastCheck=new Date().toISOString(),i.saveSettings(t);return}let a=i.getNotifications();for(let e of r)await i.sendAlert(e),a.push(e);i.saveNotifications(a),t.lastCheck=new Date().toISOString(),i.saveSettings(t)}};e.s(["notificationService",0,i])},69638,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)}]);