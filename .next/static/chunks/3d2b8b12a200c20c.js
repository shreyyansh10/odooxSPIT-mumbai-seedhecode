(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,27612,e=>{"use strict";let s=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>s],27612)},86536,e=>{"use strict";let s=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>s],86536)},72520,e=>{"use strict";let s=(0,e.i(75254).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>s],72520)},35396,e=>{"use strict";var s=e.i(43476),t=e.i(73866),r=e.i(70065),a=e.i(67881),d=e.i(23750),l=e.i(7233),n=e.i(55436),o=e.i(86536),c=e.i(71645),i=e.i(10708),x=e.i(62870),m=e.i(37727),u=e.i(27612);function h({onClose:e}){let{products:r,locations:n,addTransfer:o,addLedgerEntry:h,updateLocationStock:f}=(0,t.useStore)(),[g,j]=(0,c.useState)(1),[p,b]=(0,c.useState)(""),[N,y]=(0,c.useState)(""),[v,w]=(0,c.useState)(new Date().toISOString().split("T")[0]),[k,S]=(0,c.useState)([{productId:"",quantity:0}]),[I,C]=(0,c.useState)(""),T=(e,s,t)=>{let r=[...k];r[e]={...r[e],[s]:"quantity"===s?Number.parseInt(t)||0:t},S(r)};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-card border border-border rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border sticky top-0 bg-card z-10",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Create Internal Transfer"}),(0,s.jsx)("button",{onClick:e,className:"p-1 hover:bg-secondary rounded-lg transition-colors",children:(0,s.jsx)(m.X,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsx)("div",{className:"flex gap-4 mb-6",children:[1,2,3].map(e=>(0,s.jsx)("div",{className:`flex-1 h-1 rounded-full ${e<=g?"bg-accent":"bg-secondary"}`},e))}),1===g&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-foreground",children:"Transfer Locations"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Label,{htmlFor:"from",className:"text-sm font-medium text-foreground mb-2",children:"From Location"}),(0,s.jsxs)(x.Select,{value:p,onValueChange:b,children:[(0,s.jsx)(x.SelectTrigger,{id:"from",children:(0,s.jsx)(x.SelectValue,{placeholder:"Select source location"})}),(0,s.jsx)(x.SelectContent,{children:n.map(e=>(0,s.jsx)(x.SelectItem,{value:e.name,children:e.name},e.id))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Label,{htmlFor:"to",className:"text-sm font-medium text-foreground mb-2",children:"To Location"}),(0,s.jsxs)(x.Select,{value:N,onValueChange:y,children:[(0,s.jsx)(x.SelectTrigger,{id:"to",children:(0,s.jsx)(x.SelectValue,{placeholder:"Select destination location"})}),(0,s.jsx)(x.SelectContent,{children:n.map(e=>(0,s.jsx)(x.SelectItem,{value:e.name,children:e.name},e.id))})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(i.Label,{htmlFor:"transfer-date",className:"text-sm font-medium text-foreground mb-2",children:"Transfer Date"}),(0,s.jsx)(d.Input,{id:"transfer-date",type:"date",value:v,onChange:e=>w(e.target.value)})]})]}),2===g&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-foreground",children:"Select Products"}),(0,s.jsx)("div",{className:"space-y-3 max-h-[300px] overflow-y-auto",children:k.map((e,t)=>(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(x.Select,{value:e.productId,onValueChange:e=>T(t,"productId",e),children:[(0,s.jsx)(x.SelectTrigger,{className:"flex-1",children:(0,s.jsx)(x.SelectValue,{placeholder:"Select product"})}),(0,s.jsx)(x.SelectContent,{children:r.map(e=>(0,s.jsxs)(x.SelectItem,{value:e.id,children:[e.name," (Stock: ",e.stock,")"]},e.id))})]}),(0,s.jsx)(d.Input,{type:"number",placeholder:"Quantity",value:e.quantity||"",onChange:e=>T(t,"quantity",e.target.value),className:"w-24"}),(0,s.jsx)(a.Button,{size:"sm",variant:"ghost",onClick:()=>{S(k.filter((e,s)=>s!==t))},className:"h-10 w-10 p-0",children:(0,s.jsx)(u.Trash2,{className:"w-4 h-4 text-destructive"})})]},t))}),(0,s.jsxs)(a.Button,{onClick:()=>{S([...k,{productId:"",quantity:0}])},variant:"outline",className:"w-full gap-2 bg-transparent",children:[(0,s.jsx)(l.Plus,{className:"w-4 h-4"}),"Add Another Item"]})]}),3===g&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-foreground",children:"Review Transfer"}),(0,s.jsxs)("div",{className:"bg-secondary/50 rounded-lg p-4 space-y-2 text-sm",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"From:"}),(0,s.jsx)("span",{className:"text-foreground ml-2 font-medium",children:p})]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"To:"}),(0,s.jsx)("span",{className:"text-foreground ml-2 font-medium",children:N})]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Date:"}),(0,s.jsx)("span",{className:"text-foreground ml-2 font-medium",children:v})]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Items:"}),(0,s.jsxs)("span",{className:"text-foreground ml-2 font-medium",children:[k.length," products"]})]})]}),(0,s.jsxs)("div",{className:"bg-secondary/50 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-foreground mb-2",children:"Items to Transfer:"}),(0,s.jsx)("div",{className:"space-y-1 text-sm",children:k.map(e=>{let t=r.find(s=>s.id===e.productId);return(0,s.jsxs)("p",{className:"text-muted-foreground",children:[t?.name," - ",e.quantity," ",t?.uom]},e.productId)})})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-border",children:[(0,s.jsx)(a.Button,{type:"button",variant:"outline",onClick:()=>j(Math.max(1,g-1)),disabled:1===g,className:"flex-1",children:"Back"}),(0,s.jsx)(a.Button,{type:"button",onClick:()=>{g<3?j(g+1):(()=>{if(!p||!N||k.some(e=>!e.productId||e.quantity<=0))return alert("Please fill in all required fields");let s=o({date:v,fromLocation:p,toLocation:N,status:"Done",items:k,totalItems:k.length,notes:I});k.forEach(e=>{r.find(s=>s.id===e.productId)&&(f(e.productId,p,e.quantity,"subtract"),f(e.productId,N,e.quantity,"add"),h({date:v,type:"transfer",referenceId:s,productId:e.productId,quantity:e.quantity,fromLocation:p,toLocation:N,notes:`Transferred from ${p} to ${N}`}))}),alert("Transfer created successfully!"),e()})()},className:"flex-1",children:3===g?"Create Transfer":"Next"})]})]})]})})}var f=e.i(94179),g=e.i(88844),j=e.i(72520);function p({transfer:e,onClose:r}){let{products:d,getLocationStock:l}=(0,t.useStore)(),n=e=>d.find(s=>s.id===e);return(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-card border border-border rounded-lg w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border sticky top-0 bg-card z-10",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Transfer Details"}),(0,s.jsx)("button",{onClick:r,className:"p-1 hover:bg-secondary rounded-lg transition-colors",children:(0,s.jsx)(m.X,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"bg-secondary/50 rounded-lg p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"font-semibold text-foreground",children:"Transfer Summary"}),(0,s.jsx)(f.Badge,{variant:"secondary",className:(e=>{switch(e){case"Done":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"Waiting":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"Draft":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300";default:return"bg-secondary text-secondary-foreground"}})(e.status),children:e.status})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Transfer ID:"}),(0,s.jsx)("span",{className:"text-foreground ml-2 font-mono",children:e.id})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Date:"}),(0,s.jsx)("span",{className:"text-foreground ml-2",children:e.date})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Total Items:"}),(0,s.jsx)("span",{className:"text-foreground ml-2 font-medium",children:e.totalItems})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Total Quantity:"}),(0,s.jsx)("span",{className:"text-foreground ml-2 font-medium",children:e.items?.reduce((e,s)=>e+s.quantity,0)||0})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-background rounded-lg border",children:[(0,s.jsxs)("div",{className:"flex-1 text-center",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"From"}),(0,s.jsx)("p",{className:"font-semibold text-foreground",children:e.fromLocation})]}),(0,s.jsx)(j.ArrowRight,{className:"w-5 h-5 text-muted-foreground"}),(0,s.jsxs)("div",{className:"flex-1 text-center",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"To"}),(0,s.jsx)("p",{className:"font-semibold text-foreground",children:e.toLocation})]})]}),e.notes&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Notes:"}),(0,s.jsx)("p",{className:"text-foreground mt-1 text-sm",children:e.notes})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-foreground mb-4",children:"Transferred Items"}),(0,s.jsx)("div",{className:"space-y-3",children:e.items?.map((t,r)=>{let a=n(t.productId),d=l(t.productId,e.fromLocation),o=l(t.productId,e.toLocation);return(0,s.jsx)("div",{className:"bg-secondary/30 rounded-lg p-4 border",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-accent rounded-lg flex items-center justify-center",children:(0,s.jsx)(g.Package,{className:"w-5 h-5 text-accent-foreground"})}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h4",{className:"font-medium text-foreground",children:a?.name||"Unknown Product"}),(0,s.jsx)("span",{className:"text-sm font-mono text-muted-foreground",children:a?.sku})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"Transferred:"}),(0,s.jsxs)("p",{className:"font-semibold text-foreground",children:[t.quantity," ",a?.uom||"units"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"From Stock:"}),(0,s.jsxs)("p",{className:"font-semibold text-foreground",children:[d," ",a?.uom||"units"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"To Stock:"}),(0,s.jsxs)("p",{className:"font-semibold text-foreground",children:[o," ",a?.uom||"units"]})]})]}),a?.category&&(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Category: ",a.category]})]})]})},r)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold text-foreground mb-4",children:"Current Stock Levels"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"font-medium text-blue-800 dark:text-blue-300 mb-2",children:e.fromLocation}),(0,s.jsx)("div",{className:"space-y-1",children:e.items?.map((t,r)=>{let a=n(t.productId),d=l(t.productId,e.fromLocation);return(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-blue-700 dark:text-blue-400",children:a?.name}),(0,s.jsxs)("span",{className:"font-mono text-blue-800 dark:text-blue-300",children:[d," ",a?.uom]})]},r)})})]}),(0,s.jsxs)("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"font-medium text-green-800 dark:text-green-300 mb-2",children:e.toLocation}),(0,s.jsx)("div",{className:"space-y-1",children:e.items?.map((t,r)=>{let a=n(t.productId),d=l(t.productId,e.toLocation);return(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-green-700 dark:text-green-400",children:a?.name}),(0,s.jsxs)("span",{className:"font-mono text-green-800 dark:text-green-300",children:[d," ",a?.uom]})]},r)})})]})]})]})]}),(0,s.jsx)("div",{className:"p-6 border-t border-border",children:(0,s.jsx)(a.Button,{onClick:r,className:"w-full",children:"Close"})})]})})}function b(){let{transfers:e}=(0,t.useStore)(),[i,x]=(0,c.useState)(""),[m,u]=(0,c.useState)(!1),[g,j]=(0,c.useState)(!1),[b,N]=(0,c.useState)(null),y=e.filter(e=>e.id.toLowerCase().includes(i.toLowerCase())||e.fromLocation.toLowerCase().includes(i.toLowerCase())),v={total:e.length,done:e.filter(e=>"Done"===e.status).length,pending:e.filter(e=>"Waiting"===e.status||"Draft"===e.status).length,totalMoved:e.reduce((e,s)=>e+s.totalItems,0)};return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Internal Transfers"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-2",children:"Move stock between locations and warehouses"})]}),(0,s.jsxs)(a.Button,{onClick:()=>u(!0),className:"gap-2",children:[(0,s.jsx)(l.Plus,{className:"w-4 h-4"}),"New Transfer"]})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,s.jsxs)(r.Card,{className:"p-4 border border-border bg-card/50",children:[(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"Total Transfers"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-foreground mt-1",children:v.total})]}),(0,s.jsxs)(r.Card,{className:"p-4 border border-border bg-card/50",children:[(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"Completed"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:v.done})]}),(0,s.jsxs)(r.Card,{className:"p-4 border border-border bg-card/50",children:[(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"Pending"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:v.pending})]}),(0,s.jsxs)(r.Card,{className:"p-4 border border-border bg-card/50",children:[(0,s.jsx)("p",{className:"text-muted-foreground text-sm",children:"Total Moved"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-foreground mt-1",children:v.totalMoved})]})]}),(0,s.jsxs)(r.Card,{className:"p-6 border border-border bg-card/50",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"flex-1 relative max-w-sm",children:[(0,s.jsx)(n.Search,{className:"absolute left-3 top-3 w-5 h-5 text-muted-foreground"}),(0,s.jsx)(d.Input,{placeholder:"Search by transfer ID or location...",value:i,onChange:e=>x(e.target.value),className:"pl-10"})]})}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-border",children:[(0,s.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Transfer ID"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"From"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"To"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Date"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Items"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Status"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:y.length>0?y.map(e=>(0,s.jsxs)("tr",{className:"border-b border-border hover:bg-secondary/50 transition-colors",children:[(0,s.jsx)("td",{className:"py-3 px-4 font-mono text-xs",children:e.id.slice(0,8)}),(0,s.jsx)("td",{className:"py-3 px-4",children:e.fromLocation}),(0,s.jsx)("td",{className:"py-3 px-4",children:e.toLocation}),(0,s.jsx)("td",{className:"py-3 px-4 text-muted-foreground",children:e.date}),(0,s.jsx)("td",{className:"py-3 px-4",children:e.totalItems}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsx)(f.Badge,{variant:"secondary",className:(e=>{switch(e){case"Done":return"bg-green-500/20 text-green-600 dark:text-green-400";case"Ready":case"Waiting":return"bg-blue-500/20 text-blue-600 dark:text-blue-400";case"Draft":return"bg-yellow-500/20 text-yellow-600 dark:text-yellow-400";case"Canceled":return"bg-red-500/20 text-red-600 dark:text-red-400";default:return"bg-gray-500/20 text-gray-600 dark:text-gray-400"}})(e.status),children:e.status})}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsxs)(a.Button,{size:"sm",variant:"ghost",onClick:()=>{N(e),j(!0)},className:"gap-2",children:[(0,s.jsx)(o.Eye,{className:"w-4 h-4"}),"View"]})})]},e.id)):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:7,className:"py-8 text-center text-muted-foreground",children:"No transfers found"})})})]})})]}),m&&(0,s.jsx)(h,{onClose:()=>u(!1)}),g&&b&&(0,s.jsx)(p,{transfer:b,onClose:()=>{j(!1),N(null)}})]})}e.s(["default",()=>b],35396)}]);