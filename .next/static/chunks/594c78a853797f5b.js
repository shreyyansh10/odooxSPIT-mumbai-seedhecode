(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,86536,e=>{"use strict";let t=(0,e.i(75254).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],86536)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],27612)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},40160,e=>{"use strict";let t=(0,e.i(75254).default)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);e.s(["Download",()=>t],40160)},3281,e=>{"use strict";let t=(0,e.i(75254).default)("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);e.s(["Printer",()=>t],3281)},9115,e=>{"use strict";var t=e.i(43476),s=e.i(73866),a=e.i(70065),r=e.i(67881),l=e.i(23750),d=e.i(7233),n=e.i(55436),c=e.i(86536),i=e.i(71645),o=e.i(10708),x=e.i(62870),m=e.i(37727),u=e.i(27612);function h({onClose:e}){let{products:a,addDelivery:n,addLedgerEntry:c,updateLocationStock:h}=(0,s.useStore)(),[p,j]=(0,i.useState)(1),[g,f]=(0,i.useState)(""),[y,N]=(0,i.useState)(""),[b,v]=(0,i.useState)(new Date().toISOString().split("T")[0]),[w,k]=(0,i.useState)([{productId:"",quantity:0}]),[C,I]=(0,i.useState)(""),D=(e,t,s)=>{let a=[...w];a[e]={...a[e],[t]:"quantity"===t?Number.parseInt(s)||0:s},k(a)};return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border sticky top-0 bg-card z-10",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Create New Delivery"}),(0,t.jsx)("button",{onClick:e,className:"p-1 hover:bg-secondary rounded-lg transition-colors",children:(0,t.jsx)(m.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsx)("div",{className:"flex gap-4 mb-6",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:`flex-1 h-1 rounded-full ${e<=p?"bg-accent":"bg-secondary"}`},e))}),1===p&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground",children:"Customer Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(o.Label,{htmlFor:"customer",className:"text-sm font-medium text-foreground mb-2",children:"Customer Name"}),(0,t.jsx)(l.Input,{id:"customer",placeholder:"Enter customer name",value:g,onChange:e=>f(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.Label,{htmlFor:"order",className:"text-sm font-medium text-foreground mb-2",children:"Order Number"}),(0,t.jsx)(l.Input,{id:"order",placeholder:"e.g., ORD-12345",value:y,onChange:e=>N(e.target.value)})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(o.Label,{htmlFor:"date",className:"text-sm font-medium text-foreground mb-2",children:"Delivery Date"}),(0,t.jsx)(l.Input,{id:"date",type:"date",value:b,onChange:e=>v(e.target.value)})]})]}),2===p&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground",children:"Select Items"}),(0,t.jsx)("div",{className:"space-y-3 max-h-[300px] overflow-y-auto",children:w.map((e,s)=>(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(x.Select,{value:e.productId,onValueChange:e=>D(s,"productId",e),children:[(0,t.jsx)(x.SelectTrigger,{className:"flex-1",children:(0,t.jsx)(x.SelectValue,{placeholder:"Select product"})}),(0,t.jsx)(x.SelectContent,{children:a.map(e=>(0,t.jsxs)(x.SelectItem,{value:e.id,children:[e.name," (Stock: ",e.stock,")"]},e.id))})]}),(0,t.jsx)(l.Input,{type:"number",placeholder:"Quantity",value:e.quantity||"",onChange:e=>D(s,"quantity",e.target.value),className:"w-24"}),(0,t.jsx)(r.Button,{size:"sm",variant:"ghost",onClick:()=>{k(w.filter((e,t)=>t!==s))},className:"h-10 w-10 p-0",children:(0,t.jsx)(u.Trash2,{className:"w-4 h-4 text-destructive"})})]},s))}),(0,t.jsxs)(r.Button,{onClick:()=>{k([...w,{productId:"",quantity:0}])},variant:"outline",className:"w-full gap-2 bg-transparent",children:[(0,t.jsx)(d.Plus,{className:"w-4 h-4"}),"Add Another Item"]})]}),3===p&&(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-foreground",children:"Review Delivery"}),(0,t.jsxs)("div",{className:"bg-secondary/50 rounded-lg p-4 space-y-2 text-sm",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Customer:"}),(0,t.jsx)("span",{className:"text-foreground ml-2 font-medium",children:g})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Order:"}),(0,t.jsx)("span",{className:"text-foreground ml-2 font-medium",children:y})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Date:"}),(0,t.jsx)("span",{className:"text-foreground ml-2 font-medium",children:b})]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Items:"}),(0,t.jsxs)("span",{className:"text-foreground ml-2 font-medium",children:[w.length," products"]})]})]}),(0,t.jsxs)("div",{className:"bg-secondary/50 rounded-lg p-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-foreground mb-2",children:"Items to Deliver:"}),(0,t.jsx)("div",{className:"space-y-1 text-sm",children:w.map(e=>{let s=a.find(t=>t.id===e.productId);return(0,t.jsxs)("p",{className:"text-muted-foreground",children:[s?.name," - ",e.quantity," ",s?.uom]},e.productId)})})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-border",children:[(0,t.jsx)(r.Button,{type:"button",variant:"outline",onClick:()=>j(Math.max(1,p-1)),disabled:1===p,className:"flex-1",children:"Back"}),(0,t.jsx)(r.Button,{type:"button",onClick:()=>{p<3?j(p+1):(()=>{if(!g||!y||w.some(e=>!e.productId||e.quantity<=0))return alert("Please fill in all required fields");let t=n({date:b,customer:g,status:"Done",items:w,totalItems:w.length,notes:C});w.forEach(e=>{a.find(t=>t.id===e.productId)&&(h(e.productId,"main-warehouse",e.quantity,"subtract"),c({date:b,type:"delivery",referenceId:t,productId:e.productId,quantity:-e.quantity,fromLocation:"main-warehouse",toLocation:"customer",notes:`Delivered to ${g}`}))}),alert("Delivery created successfully!"),e()})()},className:"flex-1",children:3===p?"Create Delivery":"Next"})]})]})]})})}var p=e.i(30374),j=e.i(94179),g=e.i(88844),f=e.i(87316),y=e.i(84614),N=e.i(78583),b=e.i(3281),v=e.i(40160);function w({delivery:e,onClose:l}){let{products:d}=(0,s.useStore)();return(0,t.jsx)(p.Dialog,{open:!0,onOpenChange:l,children:(0,t.jsxs)(p.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)(p.DialogHeader,{children:(0,t.jsxs)(p.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(N.FileText,{className:"w-5 h-5"}),"Delivery Details"]})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(a.Card,{className:"p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-lg font-semibold",children:["#",e.id.slice(0,8)]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Delivery ID"})]}),(0,t.jsx)(j.Badge,{variant:"secondary",className:(e=>{switch(e){case"Done":return"bg-green-500/20 text-green-600 dark:text-green-400";case"Waiting":case"Ready":return"bg-yellow-500/20 text-yellow-600 dark:text-yellow-400";case"Draft":default:return"bg-gray-500/20 text-gray-600 dark:text-gray-400";case"Canceled":return"bg-red-500/20 text-red-600 dark:text-red-400"}})(e.status),children:e.status})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(y.User,{className:"w-4 h-4 text-muted-foreground"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.customer}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Customer"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(f.Calendar,{className:"w-4 h-4 text-muted-foreground"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium",children:e.date}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Delivery Date"})]})]})]})]}),(0,t.jsxs)(a.Card,{className:"p-4",children:[(0,t.jsxs)("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[(0,t.jsx)(g.Package,{className:"w-4 h-4"}),"Items (",e.totalItems,")"]}),(0,t.jsx)("div",{className:"space-y-3",children:e.items.map((e,s)=>{let a=d.find(t=>t.id===e.productId);return(0,t.jsxs)("div",{className:"flex justify-between items-center p-3 bg-secondary/30 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium",children:a?.name||"Unknown Product"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["SKU: ",a?.sku||"N/A"]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"font-semibold",children:[e.quantity," ",a?.uom||""]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Quantity"})]})]},s)})})]}),(0,t.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,t.jsxs)(r.Button,{variant:"outline",onClick:()=>{let t=new Blob([`
DELIVERY DETAILS
================

Delivery ID: ${e.id}
Customer: ${e.customer}
Date: ${e.date}
Status: ${e.status}
Total Items: ${e.totalItems}

ITEMS:
------
${e.items.map(e=>{let t=d.find(t=>t.id===e.productId);return`${t?.name||"Unknown Product"} - ${e.quantity} ${t?.uom||""}`}).join("\n")}

Generated on: ${new Date().toLocaleString()}
    `],{type:"text/plain"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`delivery-${e.id.slice(0,8)}.txt`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},className:"gap-2",children:[(0,t.jsx)(v.Download,{className:"w-4 h-4"}),"Download"]}),(0,t.jsxs)(r.Button,{variant:"outline",onClick:()=>{window.print()},className:"gap-2",children:[(0,t.jsx)(b.Printer,{className:"w-4 h-4"}),"Print"]}),(0,t.jsx)(r.Button,{onClick:l,children:"Close"})]})]})]})})}function k(){let{deliveries:e}=(0,s.useStore)(),[o,x]=(0,i.useState)(""),[m,u]=(0,i.useState)(!1),[p,g]=(0,i.useState)(null),f=e.filter(e=>e.id.toLowerCase().includes(o.toLowerCase())||e.customer.toLowerCase().includes(o.toLowerCase())),y={total:e.length,done:e.filter(e=>"Done"===e.status).length,ready:e.filter(e=>"Ready"===e.status).length,totalItems:e.reduce((e,t)=>e+t.totalItems,0)};return(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Deliveries"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-2",children:"Outgoing stock shipments to customers"})]}),(0,t.jsxs)(r.Button,{onClick:()=>u(!0),className:"gap-2",children:[(0,t.jsx)(d.Plus,{className:"w-4 h-4"}),"New Delivery"]})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,t.jsxs)(a.Card,{className:"p-4 border border-border bg-card/50",children:[(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"Total Deliveries"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-foreground mt-1",children:y.total})]}),(0,t.jsxs)(a.Card,{className:"p-4 border border-border bg-card/50",children:[(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"Completed"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:y.done})]}),(0,t.jsxs)(a.Card,{className:"p-4 border border-border bg-card/50",children:[(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"Ready to Ship"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1",children:y.ready})]}),(0,t.jsxs)(a.Card,{className:"p-4 border border-border bg-card/50",children:[(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"Total Items"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-foreground mt-1",children:y.totalItems})]})]}),(0,t.jsxs)(a.Card,{className:"p-6 border border-border bg-card/50",children:[(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsxs)("div",{className:"flex-1 relative max-w-sm",children:[(0,t.jsx)(n.Search,{className:"absolute left-3 top-3 w-5 h-5 text-muted-foreground"}),(0,t.jsx)(l.Input,{placeholder:"Search by delivery ID or customer...",value:o,onChange:e=>x(e.target.value),className:"pl-10"})]})}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full text-sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-border",children:[(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Delivery ID"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Customer"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Date"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Items"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Status"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:f.length>0?f.map(e=>(0,t.jsxs)("tr",{className:"border-b border-border hover:bg-secondary/50 transition-colors",children:[(0,t.jsx)("td",{className:"py-3 px-4 font-mono text-xs",children:e.id.slice(0,8)}),(0,t.jsx)("td",{className:"py-3 px-4",children:e.customer}),(0,t.jsx)("td",{className:"py-3 px-4 text-muted-foreground",children:e.date}),(0,t.jsx)("td",{className:"py-3 px-4",children:e.totalItems}),(0,t.jsx)("td",{className:"py-3 px-4",children:(0,t.jsx)(j.Badge,{variant:"secondary",className:(e=>{switch(e){case"Done":return"bg-green-500/20 text-green-600 dark:text-green-400";case"Ready":return"bg-blue-500/20 text-blue-600 dark:text-blue-400";case"Waiting":case"Draft":return"bg-yellow-500/20 text-yellow-600 dark:text-yellow-400";case"Canceled":return"bg-red-500/20 text-red-600 dark:text-red-400";default:return"bg-gray-500/20 text-gray-600 dark:text-gray-400"}})(e.status),children:e.status})}),(0,t.jsx)("td",{className:"py-3 px-4",children:(0,t.jsxs)(r.Button,{variant:"ghost",size:"sm",onClick:()=>g(e),className:"gap-1",children:[(0,t.jsx)(c.Eye,{className:"w-4 h-4"}),"View"]})})]},e.id)):(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:6,className:"py-8 text-center text-muted-foreground",children:"No deliveries found"})})})]})})]}),m&&(0,t.jsx)(h,{onClose:()=>u(!1)}),p&&(0,t.jsx)(w,{delivery:p,onClose:()=>g(null)})]})}e.s(["default",()=>k],9115)}]);