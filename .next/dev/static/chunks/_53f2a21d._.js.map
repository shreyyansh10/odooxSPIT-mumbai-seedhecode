{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/yugansh/Downloads/inventory-management-system%20%281%29/components/theme-provider.tsx"],"sourcesContent":["\"use client\"\nimport type { ReactNode } from \"react\"\nimport { ThemeProvider as NextThemesProvider, type ThemeProviderProps } from \"next-themes\"\n\nexport function ThemeProvider({ children, ...props }: ThemeProviderProps & { children: ReactNode }) {\n  return (\n    <NextThemesProvider\n      attribute=\"class\"\n      defaultTheme=\"dark\"\n      enableSystem\n      storageKey=\"theme\"\n      disableTransitionOnChange\n      {...props}\n    >\n      {children}\n    </NextThemesProvider>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIO,SAAS,cAAc,EAAE,QAAQ,EAAE,GAAG,OAAqD;IAChG,qBACE,6LAAC,oKAAkB;QACjB,WAAU;QACV,cAAa;QACb,YAAY;QACZ,YAAW;QACX,yBAAyB;QACxB,GAAG,KAAK;kBAER;;;;;;AAGP;KAbgB"}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///Users/yugansh/Downloads/inventory-management-system%20%281%29/lib/auth-store.ts"],"sourcesContent":["// Authentication store with OTP support\nexport interface AuthUser {\n  id: string\n  email: string\n  name: string\n  role: \"admin\" | \"manager\" | \"staff\"\n}\n\ninterface AuthStore {\n  users: Map<string, { password: string; name: string; role: string; otpCode?: string; otpExpiry?: number }>\n  currentUser: AuthUser | null\n}\n\nconst AUTH_STORAGE_KEY = \"auth_store\"\nconst OTP_EXPIRY = 5 * 60 * 1000 // 5 minutes\n\nexport const authStore = {\n  initializeAuth: () => {\n    if (typeof window === \"undefined\") return\n    const existing = localStorage.getItem(AUTH_STORAGE_KEY)\n    if (!existing) {\n      const initialAuth = {\n        users: {\n          \"demo@example.com\": { password: \"demo123\", name: \"Demo Admin\", role: \"admin\" },\n          \"manager@example.com\": { password: \"manager123\", name: \"Inventory Manager\", role: \"manager\" },\n          \"staff@example.com\": { password: \"staff123\", name: \"Warehouse Staff\", role: \"staff\" },\n          \"yuganshvthacker@gmail.com\": { password: \"\", name: \"Yugansh Thacker\", role: \"admin\" },\n        },\n      }\n      localStorage.setItem(AUTH_STORAGE_KEY, JSON.stringify(initialAuth))\n    }\n  },\n\n  getAuthData: () => {\n    if (typeof window === \"undefined\") return { users: {}, currentUser: null }\n    authStore.initializeAuth()\n    try {\n      const data = localStorage.getItem(AUTH_STORAGE_KEY)\n      return data ? JSON.parse(data) : { users: {}, currentUser: null }\n    } catch {\n      return { users: {}, currentUser: null }\n    }\n  },\n\n  saveAuthData: (data: any) => {\n    if (typeof window === \"undefined\") return\n    try {\n      localStorage.setItem(AUTH_STORAGE_KEY, JSON.stringify(data))\n    } catch {\n      console.error(\"Failed to save auth data\")\n    }\n  },\n\n  signup: (email: string, password: string, name: string): AuthUser => {\n    const data = authStore.getAuthData()\n    if (data.users[email]) {\n      throw new Error(\"Email already registered\")\n    }\n    data.users[email] = { password, name, role: \"staff\" }\n    authStore.saveAuthData(data)\n    return { id: email, email, name, role: \"staff\" as const }\n  },\n\n  login: (email: string, password: string) => {\n    const data = authStore.getAuthData()\n    const user = data.users[email]\n    if (!user || user.password !== password) {\n      throw new Error(\"Invalid email or password\")\n    }\n    const authUser: AuthUser = { id: email, email, name: user.name, role: user.role as AuthUser['role'] }\n    data.currentUser = authUser\n    authStore.saveAuthData(data)\n    return authUser\n  },\n\n  logout: () => {\n    const data = authStore.getAuthData()\n    data.currentUser = null\n    authStore.saveAuthData(data)\n  },\n\n  getCurrentUser: () => {\n    const data = authStore.getAuthData()\n    return data.currentUser\n  },\n\n  requestOTP: async (email: string) => {\n    try {\n      const response = await fetch('/api/auth/request-otp', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email }),\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to send OTP')\n      }\n\n      return true\n    } catch (error) {\n      console.error('OTP request failed:', error)\n      throw error\n    }\n  },\n\n  verifyOTP: async (email: string, otp: string) => {\n    try {\n      const response = await fetch('/api/auth/verify-otp', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email, otp }),\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to verify OTP')\n      }\n\n      return true\n    } catch (error) {\n      console.error('OTP verification failed:', error)\n      throw error\n    }\n  },\n\n  resetPassword: async (email: string, newPassword: string) => {\n    try {\n      const response = await fetch('/api/auth/reset-password', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email, newPassword }),\n      })\n\n      const data = await response.json()\n\n      if (!response.ok) {\n        throw new Error(data.error || 'Failed to reset password')\n      }\n\n      return true\n    } catch (error) {\n      console.error('Password reset failed:', error)\n      throw error\n    }\n  },\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 221, "column": 0}, "map": {"version":3,"sources":["file:///Users/yugansh/Downloads/inventory-management-system%20%281%29/contexts/auth-context.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { createContext, useContext, useState, useCallback, useEffect } from \"react\"\nimport { authStore, type AuthUser } from \"@/lib/auth-store\"\n\ninterface AuthContextType {\n  user: AuthUser | null\n  login: (email: string, password: string) => Promise<AuthUser>\n  signup: (email: string, password: string, name: string) => Promise<AuthUser>\n  logout: () => void\n  requestOTP: (email: string) => Promise<void>\n  verifyOTP: (email: string, otp: string) => Promise<void>\n  resetPassword: (email: string, newPassword: string) => Promise<void>\n  isLoading: boolean\n  error: string | null\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<AuthUser | null>(null)\n  const [isLoading, setIsLoading] = useState(false)\n  const [error, setError] = useState<string | null>(null)\n\n  useEffect(() => {\n    authStore.initializeAuth()\n    const currentUser = authStore.getCurrentUser()\n    setUser(currentUser)\n  }, [])\n\n  const login = useCallback(async (email: string, password: string) => {\n    setIsLoading(true)\n    setError(null)\n    try {\n      const authUser = authStore.login(email, password)\n      setUser(authUser)\n      return authUser\n    } catch (err: any) {\n      setError(err.message || \"Login failed\")\n      throw err\n    } finally {\n      setIsLoading(false)\n    }\n  }, [])\n\n  const signup = useCallback(async (email: string, password: string, name: string) => {\n    setIsLoading(true)\n    setError(null)\n    try {\n      const authUser = authStore.signup(email, password, name)\n      setUser(authUser)\n      return authUser\n    } catch (err: any) {\n      setError(err.message || \"Signup failed\")\n      throw err\n    } finally {\n      setIsLoading(false)\n    }\n  }, [])\n\n  const logout = useCallback(() => {\n    authStore.logout()\n    setUser(null)\n  }, [])\n\n  const requestOTP = useCallback(async (email: string) => {\n    setIsLoading(true)\n    setError(null)\n    try {\n      await authStore.requestOTP(email)\n    } catch (err: any) {\n      setError(err.message || \"OTP request failed\")\n      throw err\n    } finally {\n      setIsLoading(false)\n    }\n  }, [])\n\n  const verifyOTP = useCallback(async (email: string, otp: string) => {\n    setIsLoading(true)\n    setError(null)\n    try {\n      authStore.verifyOTP(email, otp)\n    } catch (err: any) {\n      setError(err.message || \"OTP verification failed\")\n      throw err\n    } finally {\n      setIsLoading(false)\n    }\n  }, [])\n\n  const resetPassword = useCallback(async (email: string, newPassword: string) => {\n    setIsLoading(true)\n    setError(null)\n    try {\n      authStore.resetPassword(email, newPassword)\n    } catch (err: any) {\n      setError(err.message || \"Password reset failed\")\n      throw err\n    } finally {\n      setIsLoading(false)\n    }\n  }, [])\n\n  const value: AuthContextType = {\n    user,\n    login,\n    signup,\n    logout,\n    requestOTP,\n    verifyOTP,\n    resetPassword,\n    isLoading,\n    error,\n  }\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext)\n  if (!context) {\n    throw new Error(\"useAuth must be used within AuthProvider\")\n  }\n  return context\n}\n"],"names":[],"mappings":";;;;;;;AAGA;AACA;;;AAJA;;;AAkBA,MAAM,4BAAc,IAAA,8KAAa,EAA8B;AAExD,SAAS,aAAa,EAAE,QAAQ,EAAiC;;IACtE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAkB;IAClD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAgB;IAElD,IAAA,0KAAS;kCAAC;YACR,oIAAS,CAAC,cAAc;YACxB,MAAM,cAAc,oIAAS,CAAC,cAAc;YAC5C,QAAQ;QACV;iCAAG,EAAE;IAEL,MAAM,QAAQ,IAAA,4KAAW;2CAAC,OAAO,OAAe;YAC9C,aAAa;YACb,SAAS;YACT,IAAI;gBACF,MAAM,WAAW,oIAAS,CAAC,KAAK,CAAC,OAAO;gBACxC,QAAQ;gBACR,OAAO;YACT,EAAE,OAAO,KAAU;gBACjB,SAAS,IAAI,OAAO,IAAI;gBACxB,MAAM;YACR,SAAU;gBACR,aAAa;YACf;QACF;0CAAG,EAAE;IAEL,MAAM,SAAS,IAAA,4KAAW;4CAAC,OAAO,OAAe,UAAkB;YACjE,aAAa;YACb,SAAS;YACT,IAAI;gBACF,MAAM,WAAW,oIAAS,CAAC,MAAM,CAAC,OAAO,UAAU;gBACnD,QAAQ;gBACR,OAAO;YACT,EAAE,OAAO,KAAU;gBACjB,SAAS,IAAI,OAAO,IAAI;gBACxB,MAAM;YACR,SAAU;gBACR,aAAa;YACf;QACF;2CAAG,EAAE;IAEL,MAAM,SAAS,IAAA,4KAAW;4CAAC;YACzB,oIAAS,CAAC,MAAM;YAChB,QAAQ;QACV;2CAAG,EAAE;IAEL,MAAM,aAAa,IAAA,4KAAW;gDAAC,OAAO;YACpC,aAAa;YACb,SAAS;YACT,IAAI;gBACF,MAAM,oIAAS,CAAC,UAAU,CAAC;YAC7B,EAAE,OAAO,KAAU;gBACjB,SAAS,IAAI,OAAO,IAAI;gBACxB,MAAM;YACR,SAAU;gBACR,aAAa;YACf;QACF;+CAAG,EAAE;IAEL,MAAM,YAAY,IAAA,4KAAW;+CAAC,OAAO,OAAe;YAClD,aAAa;YACb,SAAS;YACT,IAAI;gBACF,oIAAS,CAAC,SAAS,CAAC,OAAO;YAC7B,EAAE,OAAO,KAAU;gBACjB,SAAS,IAAI,OAAO,IAAI;gBACxB,MAAM;YACR,SAAU;gBACR,aAAa;YACf;QACF;8CAAG,EAAE;IAEL,MAAM,gBAAgB,IAAA,4KAAW;mDAAC,OAAO,OAAe;YACtD,aAAa;YACb,SAAS;YACT,IAAI;gBACF,oIAAS,CAAC,aAAa,CAAC,OAAO;YACjC,EAAE,OAAO,KAAU;gBACjB,SAAS,IAAI,OAAO,IAAI;gBACxB,MAAM;YACR,SAAU;gBACR,aAAa;YACf;QACF;kDAAG,EAAE;IAEL,MAAM,QAAyB;QAC7B;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;IAEA,qBAAO,6LAAC,YAAY,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AAC9C;GAlGgB;KAAA;AAoGT,SAAS;;IACd,MAAM,UAAU,IAAA,2KAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANgB"}},
    {"offset": {"line": 368, "column": 0}, "map": {"version":3,"sources":["file:///Users/yugansh/Downloads/inventory-management-system%20%281%29/lib/store.ts"],"sourcesContent":["// Data store for managing inventory state with localStorage persistence\nexport interface Product {\n  id: string\n  name: string\n  sku: string\n  category: string\n  uom: string\n  stock: number\n  locationStock: { [locationId: string]: number }\n  reorderLevel?: number\n  lastRestockDate?: string\n}\n\nexport interface Location {\n  id: string\n  name: string\n  type: string\n  capacity: number\n  currentUsage: number\n}\n\nexport interface Warehouse {\n  id: string\n  name: string\n  locations: string[]\n}\n\nexport interface Receipt {\n  id: string\n  date: string\n  supplier: string\n  status: \"Draft\" | \"Waiting\" | \"Ready\" | \"Done\" | \"Canceled\"\n  items: { productId: string; quantity: number; receivedQuantity?: number }[]\n  totalItems: number\n  notes: string\n}\n\nexport interface Delivery {\n  id: string\n  date: string\n  customer: string\n  status: \"Draft\" | \"Waiting\" | \"Ready\" | \"Done\" | \"Canceled\"\n  items: { productId: string; quantity: number; deliveredQuantity?: number }[]\n  totalItems: number\n  notes: string\n}\n\nexport interface Transfer {\n  id: string\n  date: string\n  fromLocation: string\n  toLocation: string\n  status: \"Draft\" | \"Waiting\" | \"Ready\" | \"Done\" | \"Canceled\"\n  items: { productId: string; quantity: number }[]\n  totalItems: number\n  notes: string\n}\n\nexport interface Adjustment {\n  id: string\n  date: string\n  location: string\n  status: \"Draft\" | \"Done\" | \"Canceled\"\n  items: { productId: string; countedQuantity: number; variance: number }[]\n  reason: string\n  notes: string\n}\n\nexport interface LedgerEntry {\n  id: string\n  date: string\n  type: \"receipt\" | \"delivery\" | \"transfer\" | \"adjustment\"\n  referenceId: string\n  productId: string\n  quantity: number\n  fromLocation?: string\n  toLocation?: string\n  notes: string\n}\n\nexport interface User {\n  id: string\n  email: string\n  name: string\n  role: \"admin\" | \"manager\" | \"staff\"\n  createdAt: string\n}\n\ninterface InventoryStore {\n  user: User | null\n  products: Product[]\n  warehouses: Warehouse[]\n  locations: Location[]\n  receipts: Receipt[]\n  deliveries: Delivery[]\n  transfers: Transfer[]\n  adjustments: Adjustment[]\n  ledger: LedgerEntry[]\n}\n\nconst STORAGE_KEY = \"inventory_store\"\n\nconst defaultStore: InventoryStore = {\n  user: null,\n  products: [\n    { \n      id: \"1\", name: \"Steel Rods\", sku: \"SR-001\", category: \"Raw Materials\", uom: \"kg\", stock: 450,\n      locationStock: { \"main-warehouse\": 300, \"warehouse-2\": 100, \"production-floor\": 50 }, reorderLevel: 100\n    },\n    { \n      id: \"2\", name: \"Aluminum Sheets\", sku: \"AS-002\", category: \"Raw Materials\", uom: \"sheet\", stock: 120,\n      locationStock: { \"main-warehouse\": 80, \"warehouse-2\": 40 }, reorderLevel: 50\n    },\n    { \n      id: \"3\", name: \"Plastic Frames\", sku: \"PF-003\", category: \"Components\", uom: \"piece\", stock: 8,\n      locationStock: { \"production-floor\": 8 }, reorderLevel: 20\n    },\n    { \n      id: \"4\", name: \"Rubber Seals\", sku: \"RS-004\", category: \"Components\", uom: \"piece\", stock: 0,\n      locationStock: {}, reorderLevel: 25\n    },\n    { \n      id: \"5\", name: \"Copper Wire\", sku: \"CW-005\", category: \"Raw Materials\", uom: \"kg\", stock: 320,\n      locationStock: { \"main-warehouse\": 200, \"production-floor\": 120 }, reorderLevel: 75\n    },\n  ],\n  warehouses: [\n    {\n      id: \"main-warehouse\",\n      name: \"Main Warehouse\",\n      locations: [\"main-warehouse\", \"warehouse-2\"],\n    },\n    {\n      id: \"production-floor\",\n      name: \"Production Floor\",\n      locations: [\"production-floor\"],\n    },\n  ],\n  locations: [\n    { id: \"main-warehouse\", name: \"Main Warehouse\", type: \"Storage\", capacity: 1000, currentUsage: 450 },\n    { id: \"warehouse-2\", name: \"Warehouse 2\", type: \"Storage\", capacity: 500, currentUsage: 120 },\n    { id: \"production-floor\", name: \"Production Floor\", type: \"Production\", capacity: 300, currentUsage: 200 },\n  ],\n  receipts: [],\n  deliveries: [],\n  transfers: [],\n  adjustments: [],\n  ledger: [],\n}\n\nexport const store = {\n  getStore: (): InventoryStore => {\n    if (typeof window === \"undefined\") return defaultStore\n    try {\n      const data = localStorage.getItem(STORAGE_KEY)\n      return data ? JSON.parse(data) : defaultStore\n    } catch {\n      return defaultStore\n    }\n  },\n\n  setStore: (data: InventoryStore) => {\n    if (typeof window === \"undefined\") return\n    try {\n      // Create a deep copy to ensure we're storing a clean object\n      const cleanData = JSON.parse(JSON.stringify(data))\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(cleanData))\n    } catch {\n      console.error(\"Failed to save store\")\n    }\n  },\n\n  updateUser: (user: User | null) => {\n    const current = store.getStore()\n    current.user = user\n    store.setStore(current)\n  },\n\n  addProduct: (product: Omit<Product, \"id\">) => {\n    const current = store.getStore()\n    const newProduct = { \n      ...product, \n      id: Date.now().toString(),\n      // Initialize locationStock with the initial stock in main-warehouse\n      locationStock: {\n        \"main-warehouse\": product.stock || 0,\n        ...product.locationStock\n      }\n    }\n    current.products.push(newProduct)\n    store.setStore(current)\n    return newProduct\n  },\n\n  updateProduct: (id: string, updates: Partial<Product>) => {\n    const current = store.getStore()\n    const product = current.products.find((p) => p.id === id)\n    if (product) {\n      Object.assign(product, updates)\n      store.setStore(current)\n    }\n  },\n\n  deleteProduct: (id: string) => {\n    const current = store.getStore()\n    current.products = current.products.filter((p) => p.id !== id)\n    store.setStore(current)\n  },\n\n  addReceipt: (receipt: Omit<Receipt, \"id\">) => {\n    const current = store.getStore()\n    const newReceipt = { ...receipt, id: Date.now().toString() }\n    current.receipts.push(newReceipt)\n    store.setStore(current)\n    return newReceipt\n  },\n\n  updateReceipt: (id: string, updates: Partial<Receipt>) => {\n    const current = store.getStore()\n    const receipt = current.receipts.find((r) => r.id === id)\n    if (receipt) {\n      Object.assign(receipt, updates)\n      store.setStore(current)\n    }\n  },\n\n  addDelivery: (delivery: Omit<Delivery, \"id\">) => {\n    const current = store.getStore()\n    const newDelivery = { ...delivery, id: Date.now().toString() }\n    current.deliveries.push(newDelivery)\n    store.setStore(current)\n    return newDelivery\n  },\n\n  updateDelivery: (id: string, updates: Partial<Delivery>) => {\n    const current = store.getStore()\n    const delivery = current.deliveries.find((d) => d.id === id)\n    if (delivery) {\n      Object.assign(delivery, updates)\n      store.setStore(current)\n    }\n  },\n\n  addTransfer: (transfer: Omit<Transfer, \"id\">) => {\n    const current = store.getStore()\n    const newTransfer = { ...transfer, id: Date.now().toString() }\n    current.transfers.push(newTransfer)\n    store.setStore(current)\n    return newTransfer\n  },\n\n  updateTransfer: (id: string, updates: Partial<Transfer>) => {\n    const current = store.getStore()\n    const transfer = current.transfers.find((t) => t.id === id)\n    if (transfer) {\n      Object.assign(transfer, updates)\n      store.setStore(current)\n    }\n  },\n\n  addAdjustment: (adjustment: Omit<Adjustment, \"id\">) => {\n    const current = store.getStore()\n    const newAdjustment = { ...adjustment, id: Date.now().toString() }\n    current.adjustments.push(newAdjustment)\n    store.setStore(current)\n    return newAdjustment\n  },\n\n  addLedgerEntry: (entry: Omit<LedgerEntry, \"id\">) => {\n    const current = store.getStore()\n    const newEntry = { ...entry, id: `${Date.now()}-${Math.random().toString(36).substr(2, 9)}` }\n    current.ledger.push(newEntry)\n    store.setStore(current)\n  },\n\n  updateLocationStock: (productId: string, locationId: string, quantity: number, operation: 'add' | 'subtract' | 'set') => {\n    const current = store.getStore()\n    const productIndex = current.products.findIndex(p => p.id === productId)\n    if (productIndex === -1) return\n\n    // Create a completely new product object to ensure React detects changes\n    const product = { ...current.products[productIndex] }\n    \n    // Initialize locationStock if it doesn't exist\n    if (!product.locationStock) {\n      product.locationStock = {\n        \"main-warehouse\": product.stock || 0\n      }\n    }\n\n    // Create new locationStock object\n    product.locationStock = { ...product.locationStock }\n    \n    const currentLocationStock = product.locationStock[locationId] || 0\n    \n    switch (operation) {\n      case 'add':\n        product.locationStock[locationId] = currentLocationStock + quantity\n        break\n      case 'subtract':\n        const newStock = Math.max(0, currentLocationStock - quantity)\n        product.locationStock[locationId] = newStock\n        break\n      case 'set':\n        product.locationStock[locationId] = quantity\n        break\n    }\n\n    // Recalculate total stock from all locations\n    product.stock = Object.values(product.locationStock).reduce((sum, stock) => sum + stock, 0)\n    \n    // Replace the product in the array with the new object\n    current.products[productIndex] = product\n    \n    store.setStore(current)\n  },\n\n  getLocationStock: (productId: string, locationId: string): number => {\n    const current = store.getStore()\n    const product = current.products.find(p => p.id === productId)\n    return product?.locationStock[locationId] || 0\n  },\n\n  getLowStockProducts: (): Product[] => {\n    const current = store.getStore()\n    return current.products.filter(p => p.reorderLevel && p.stock <= p.reorderLevel)\n  },\n\n  getLocationStockSummary: (locationId: string) => {\n    const current = store.getStore()\n    return current.products.map(product => ({\n      productId: product.id,\n      productName: product.name,\n      sku: product.sku,\n      stock: product.locationStock[locationId] || 0,\n      uom: product.uom\n    })).filter(item => item.stock > 0)\n  },\n\n  // Utility function to migrate existing products to have proper locationStock\n  migrateProductLocationStock: () => {\n    const current = store.getStore()\n    let hasChanges = false\n    \n    current.products.forEach(product => {\n      if (!product.locationStock || Object.keys(product.locationStock).length === 0) {\n        product.locationStock = {\n          \"main-warehouse\": product.stock || 0\n        }\n        hasChanges = true\n      }\n    })\n    \n    if (hasChanges) {\n      store.setStore(current)\n    }\n  },\n\n  getOperationStats: () => {\n    const current = store.getStore()\n    return {\n      totalProducts: current.products.length,\n      lowStockItems: current.products.filter((p) => p.stock < 20).length,\n      outOfStockItems: current.products.filter((p) => p.stock === 0).length,\n      pendingReceipts: current.receipts.filter((r) => r.status === \"Waiting\" || r.status === \"Draft\").length,\n      pendingDeliveries: current.deliveries.filter((d) => d.status === \"Waiting\" || d.status === \"Draft\").length,\n      scheduledTransfers: current.transfers.filter((t) => t.status === \"Waiting\" || t.status === \"Draft\").length,\n    }\n  },\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 705, "column": 0}, "map": {"version":3,"sources":["file:///Users/yugansh/Downloads/inventory-management-system%20%281%29/contexts/store-context.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { createContext, useContext, useState, useCallback, useEffect } from \"react\"\nimport { store } from \"@/lib/store\"\nimport type { Product, Receipt, Delivery, Transfer, Adjustment, LedgerEntry, Location } from \"@/lib/store\"\n\ninterface StoreContextType {\n  products: Product[]\n  receipts: Receipt[]\n  deliveries: Delivery[]\n  transfers: Transfer[]\n  adjustments: Adjustment[]\n  ledger: LedgerEntry[]\n  locations: Location[]\n  addProduct: (product: Omit<Product, \"id\">) => void\n  updateProduct: (id: string, updates: Partial<Product>) => void\n  deleteProduct: (id: string) => void\n  addReceipt: (receipt: Omit<Receipt, \"id\">) => string\n  updateReceipt: (id: string, updates: Partial<Receipt>) => void\n  addDelivery: (delivery: Omit<Delivery, \"id\">) => string\n  updateDelivery: (id: string, updates: Partial<Delivery>) => void\n  addTransfer: (transfer: Omit<Transfer, \"id\">) => string\n  updateTransfer: (id: string, updates: Partial<Transfer>) => void\n  addAdjustment: (adjustment: Omit<Adjustment, \"id\">) => string\n  addLedgerEntry: (entry: Omit<LedgerEntry, \"id\">) => void\n  updateLocationStock: (productId: string, locationId: string, quantity: number, operation: 'add' | 'subtract' | 'set') => void\n  getLocationStock: (productId: string, locationId: string) => number\n  getLowStockProducts: () => Product[]\n  getLocationStockSummary: (locationId: string) => any[]\n  getStats: () => any\n  refreshData: () => void\n}\n\nconst StoreContext = createContext<StoreContextType | undefined>(undefined)\n\nexport function StoreProvider({ children }: { children: React.ReactNode }) {\n  const [storeData, setStoreData] = useState<any>(null)\n  const [updateTrigger, setUpdateTrigger] = useState(0)\n\n  const refreshData = useCallback(() => {\n    const data = store.getStore()\n    // Create a completely new object to force React re-render\n    setStoreData({ \n      ...data, \n      products: data.products.map(p => ({ ...p, locationStock: { ...p.locationStock } })),\n      deliveries: [...data.deliveries],\n      receipts: [...data.receipts],\n      transfers: [...data.transfers],\n      adjustments: [...data.adjustments],\n      ledger: [...data.ledger]\n    })\n    // Also trigger a counter update to ensure re-render\n    setUpdateTrigger(prev => prev + 1)\n  }, [])\n\n  useEffect(() => {\n    // Migrate existing products to have proper locationStock\n    store.migrateProductLocationStock()\n    refreshData()\n  }, [refreshData])\n\n  const addProduct = useCallback(\n    (product: Omit<Product, \"id\">) => {\n      store.addProduct(product)\n      refreshData()\n    },\n    [refreshData],\n  )\n\n  const updateProduct = useCallback(\n    (id: string, updates: Partial<Product>) => {\n      store.updateProduct(id, updates)\n      refreshData()\n    },\n    [refreshData],\n  )\n\n  const deleteProduct = useCallback(\n    (id: string) => {\n      store.deleteProduct(id)\n      refreshData()\n    },\n    [refreshData],\n  )\n\n  const addReceipt = useCallback(\n    (receipt: Omit<Receipt, \"id\">) => {\n      const newReceipt = store.addReceipt(receipt)\n      refreshData()\n      return newReceipt.id\n    },\n    [refreshData],\n  )\n\n  const updateReceipt = useCallback(\n    (id: string, updates: Partial<Receipt>) => {\n      store.updateReceipt(id, updates)\n      refreshData()\n    },\n    [refreshData],\n  )\n\n  const addDelivery = useCallback(\n    (delivery: Omit<Delivery, \"id\">) => {\n      const newDelivery = store.addDelivery(delivery)\n      refreshData()\n      return newDelivery.id\n    },\n    [refreshData],\n  )\n\n  const updateDelivery = useCallback(\n    (id: string, updates: Partial<Delivery>) => {\n      store.updateDelivery(id, updates)\n      refreshData()\n    },\n    [refreshData],\n  )\n\n  const addTransfer = useCallback(\n    (transfer: Omit<Transfer, \"id\">) => {\n      const newTransfer = store.addTransfer(transfer)\n      refreshData()\n      return newTransfer.id\n    },\n    [refreshData],\n  )\n\n  const updateTransfer = useCallback(\n    (id: string, updates: Partial<Transfer>) => {\n      store.updateTransfer(id, updates)\n      refreshData()\n    },\n    [refreshData],\n  )\n\n  const addAdjustment = useCallback(\n    (adjustment: Omit<Adjustment, \"id\">) => {\n      const newAdjustment = store.addAdjustment(adjustment)\n      refreshData()\n      return newAdjustment.id\n    },\n    [refreshData],\n  )\n\n  const addLedgerEntry = useCallback(\n    (entry: Omit<LedgerEntry, \"id\">) => {\n      store.addLedgerEntry(entry)\n      refreshData()\n    },\n    [refreshData],\n  )\n\n  const updateLocationStock = useCallback(\n    (productId: string, locationId: string, quantity: number, operation: 'add' | 'subtract' | 'set') => {\n      store.updateLocationStock(productId, locationId, quantity, operation)\n      refreshData()\n    },\n    [refreshData],\n  )\n\n  const getStats = useCallback(() => {\n    return store.getOperationStats()\n  }, [])\n\n  const value: StoreContextType = {\n    products: storeData?.products || [],\n    receipts: storeData?.receipts || [],\n    deliveries: storeData?.deliveries || [],\n    transfers: storeData?.transfers || [],\n    adjustments: storeData?.adjustments || [],\n    ledger: storeData?.ledger || [],\n    locations: storeData?.locations || [],\n    addProduct,\n    updateProduct,\n    deleteProduct,\n    addReceipt,\n    updateReceipt,\n    addDelivery,\n    updateDelivery,\n    addTransfer,\n    updateTransfer,\n    addAdjustment,\n    addLedgerEntry,\n    updateLocationStock,\n    getLocationStock: store.getLocationStock,\n    getLowStockProducts: store.getLowStockProducts,\n    getLocationStockSummary: store.getLocationStockSummary,\n    getStats,\n    refreshData,\n  }\n\n  return <StoreContext.Provider value={value}>{children}</StoreContext.Provider>\n}\n\nexport function useStore() {\n  const context = useContext(StoreContext)\n  if (!context) {\n    throw new Error(\"useStore must be used within StoreProvider\")\n  }\n  return context\n}\n"],"names":[],"mappings":"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"}}]
}