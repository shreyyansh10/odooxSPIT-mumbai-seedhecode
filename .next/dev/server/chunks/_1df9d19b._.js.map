{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/yugansh/Downloads/inventory-management-system%20%281%29/database/database-service.ts"],"sourcesContent":["// Database service using Prisma for StockMaster Inventory Management System\nimport { PrismaClient } from '@/lib/generated/prisma'\nimport type { \n  Product, \n  Receipt, \n  Delivery, \n  Transfer, \n  Adjustment, \n  LedgerEntry, \n  Location, \n  Warehouse,\n  User,\n  OperationStatus,\n  Role,\n  LedgerType,\n  LocationType\n} from '@/lib/generated/prisma'\n\n// Type declaration for Node.js process\ndeclare const process: {\n  env: { [key: string]: string | undefined }\n  NODE_ENV?: string\n}\n\n// Create a singleton Prisma client\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined\n}\n\nexport const prisma =\n  globalForPrisma.prisma ??\n  new PrismaClient({\n    log: ['query', 'error', 'warn'],\n  })\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\n\n// Type definitions for input data (without IDs and timestamps)\nexport type CreateProductData = {\n  name: string\n  sku: string\n  category: string\n  uom: string\n  stock: number\n  reorderLevel?: number\n  lastRestockDate?: Date\n}\n\nexport type CreateReceiptData = {\n  date: Date\n  supplier: string\n  locationId: string\n  items: {\n    productId: string\n    quantity: number\n    receivedQuantity?: number\n  }[]\n  notes?: string\n}\n\nexport type CreateDeliveryData = {\n  date: Date\n  customer: string\n  items: {\n    productId: string\n    quantity: number\n    deliveredQuantity?: number\n  }[]\n  notes?: string\n}\n\nexport type CreateTransferData = {\n  date: Date\n  fromLocationId: string\n  toLocationId: string\n  items: {\n    productId: string\n    quantity: number\n  }[]\n  notes?: string\n}\n\nexport type CreateAdjustmentData = {\n  date: Date\n  locationId: string\n  reason: string\n  items: {\n    productId: string\n    countedQuantity: number\n    variance: number\n  }[]\n  notes?: string\n}\n\nexport type CreateLedgerEntryData = {\n  date: Date\n  type: LedgerType\n  referenceId: string\n  productId: string\n  quantity: number\n  fromLocationId?: string\n  toLocationId?: string\n  notes?: string\n}\n\n// Database service functions\nexport const databaseService = {\n  // Initialize database with default data\n  initializeDatabase: async () => {\n    try {\n      // Check if data already exists\n      const existingProducts = await prisma.product.count()\n      if (existingProducts > 0) {\n        console.log('Database already initialized')\n        return\n      }\n\n      console.log('Initializing database with default data...')\n\n      // Create default warehouses\n      const mainWarehouse = await prisma.warehouse.create({\n        data: {\n          name: 'Main Warehouse',\n        },\n      })\n\n      const productionWarehouse = await prisma.warehouse.create({\n        data: {\n          name: 'Production Floor',\n        },\n      })\n\n      // Create default locations\n      const locations = await Promise.all([\n        prisma.location.create({\n          data: {\n            id: 'loc1',\n            name: 'Rack A',\n            type: 'STORAGE',\n            capacity: 1000,\n            currentUsage: 450,\n            warehouseId: mainWarehouse.id,\n          },\n        }),\n        prisma.location.create({\n          data: {\n            id: 'loc2',\n            name: 'Rack B',\n            type: 'STORAGE',\n            capacity: 500,\n            currentUsage: 120,\n            warehouseId: mainWarehouse.id,\n          },\n        }),\n        prisma.location.create({\n          data: {\n            id: 'loc3',\n            name: 'Picking Zone',\n            type: 'STAGING',\n            capacity: 200,\n            currentUsage: 50,\n            warehouseId: mainWarehouse.id,\n          },\n        }),\n        prisma.location.create({\n          data: {\n            id: 'loc4',\n            name: 'Production Rack',\n            type: 'PRODUCTION',\n            capacity: 300,\n            currentUsage: 200,\n            warehouseId: productionWarehouse.id,\n          },\n        }),\n        prisma.location.create({\n          data: {\n            id: 'main-warehouse',\n            name: 'Main Warehouse',\n            type: 'STORAGE',\n            capacity: 10000,\n            currentUsage: 0,\n            warehouseId: mainWarehouse.id,\n          },\n        }),\n      ])\n\n      // Create default products with location stock\n      const products = [\n        {\n          id: '1',\n          name: 'Steel Rods',\n          sku: 'SR-001',\n          category: 'Raw Materials',\n          uom: 'kg',\n          stock: 450,\n          reorderLevel: 100,\n          locationStocks: [\n            { locationId: 'loc1', quantity: 300 },\n            { locationId: 'loc2', quantity: 100 },\n            { locationId: 'loc3', quantity: 50 },\n          ],\n        },\n        {\n          id: '2',\n          name: 'Aluminum Sheets',\n          sku: 'AS-002',\n          category: 'Raw Materials',\n          uom: 'sheet',\n          stock: 120,\n          reorderLevel: 50,\n          locationStocks: [\n            { locationId: 'loc1', quantity: 80 },\n            { locationId: 'loc2', quantity: 40 },\n          ],\n        },\n        {\n          id: '3',\n          name: 'Plastic Frames',\n          sku: 'PF-003',\n          category: 'Components',\n          uom: 'piece',\n          stock: 8,\n          reorderLevel: 20,\n          locationStocks: [\n            { locationId: 'loc3', quantity: 8 },\n          ],\n        },\n        {\n          id: '4',\n          name: 'Rubber Seals',\n          sku: 'RS-004',\n          category: 'Components',\n          uom: 'piece',\n          stock: 0,\n          reorderLevel: 25,\n          locationStocks: [],\n        },\n        {\n          id: '5',\n          name: 'Copper Wire',\n          sku: 'CW-005',\n          category: 'Raw Materials',\n          uom: 'kg',\n          stock: 320,\n          reorderLevel: 75,\n          locationStocks: [\n            { locationId: 'loc1', quantity: 200 },\n            { locationId: 'loc4', quantity: 120 },\n          ],\n        },\n      ]\n\n      for (const productData of products) {\n        const product = await prisma.product.create({\n          data: {\n            id: productData.id,\n            name: productData.name,\n            sku: productData.sku,\n            category: productData.category,\n            uom: productData.uom,\n            stock: productData.stock,\n            reorderLevel: productData.reorderLevel,\n          },\n        })\n\n        // Create location stocks\n        for (const locationStock of productData.locationStocks) {\n          await prisma.locationStock.create({\n            data: {\n              productId: product.id,\n              locationId: locationStock.locationId,\n              quantity: locationStock.quantity,\n            },\n          })\n        }\n      }\n\n      console.log('Database initialized successfully')\n    } catch (error) {\n      console.error('Error initializing database:', error)\n      throw error\n    }\n  },\n\n  // Product operations\n  getProducts: async () => {\n    return await prisma.product.findMany({\n      include: {\n        locationStocks: {\n          include: {\n            location: true,\n          },\n        },\n      },\n      orderBy: { name: 'asc' },\n    })\n  },\n\n  createProduct: async (data: CreateProductData) => {\n    return await prisma.$transaction(async (tx) => {\n      const product = await tx.product.create({\n        data: {\n          name: data.name,\n          sku: data.sku,\n          category: data.category,\n          uom: data.uom,\n          stock: data.stock,\n          reorderLevel: data.reorderLevel,\n          lastRestockDate: data.lastRestockDate,\n        },\n      })\n\n      // Initialize stock in main warehouse\n      if (data.stock > 0) {\n        await tx.locationStock.create({\n          data: {\n            productId: product.id,\n            locationId: 'main-warehouse',\n            quantity: data.stock,\n          },\n        })\n      }\n\n      return product\n    })\n  },\n\n  updateProduct: async (id: string, data: Partial<CreateProductData>) => {\n    return await prisma.product.update({\n      where: { id },\n      data,\n    })\n  },\n\n  deleteProduct: async (id: string) => {\n    return await prisma.product.delete({\n      where: { id },\n    })\n  },\n\n  // Location stock operations\n  updateLocationStock: async (\n    productId: string,\n    locationId: string,\n    quantity: number,\n    operation: 'add' | 'subtract' | 'set'\n  ) => {\n    return await prisma.$transaction(async (tx) => {\n      // Find or create location stock\n      let locationStock = await tx.locationStock.findUnique({\n        where: {\n          productId_locationId: {\n            productId,\n            locationId,\n          },\n        },\n      })\n\n      if (!locationStock) {\n        locationStock = await tx.locationStock.create({\n          data: {\n            productId,\n            locationId,\n            quantity: 0,\n          },\n        })\n      }\n\n      let newQuantity = locationStock.quantity\n\n      switch (operation) {\n        case 'add':\n          newQuantity = locationStock.quantity + quantity\n          break\n        case 'subtract':\n          newQuantity = Math.max(0, locationStock.quantity - quantity)\n          break\n        case 'set':\n          newQuantity = quantity\n          break\n      }\n\n      // Update location stock\n      await tx.locationStock.update({\n        where: { id: locationStock.id },\n        data: { quantity: newQuantity },\n      })\n\n      // Recalculate total product stock\n      const allLocationStocks = await tx.locationStock.findMany({\n        where: { productId },\n      })\n\n      const totalStock = allLocationStocks.reduce((sum, ls) => sum + ls.quantity, 0)\n\n      await tx.product.update({\n        where: { id: productId },\n        data: { stock: totalStock },\n      })\n\n      return { success: true, newQuantity, totalStock }\n    })\n  },\n\n  getLocationStock: async (productId: string, locationId: string) => {\n    const locationStock = await prisma.locationStock.findUnique({\n      where: {\n        productId_locationId: {\n          productId,\n          locationId,\n        },\n      },\n    })\n    return locationStock?.quantity || 0\n  },\n\n  // Receipt operations\n  createReceipt: async (data: CreateReceiptData) => {\n    return await prisma.$transaction(async (tx) => {\n      const receipt = await tx.receipt.create({\n        data: {\n          date: data.date,\n          supplier: data.supplier,\n          locationId: data.locationId,\n          totalItems: data.items.length,\n          notes: data.notes,\n          status: 'DONE',\n        },\n      })\n\n      // Create receipt items and update stock\n      for (const item of data.items) {\n        await tx.receiptItem.create({\n          data: {\n            receiptId: receipt.id,\n            productId: item.productId,\n            quantity: item.quantity,\n            receivedQuantity: item.receivedQuantity || item.quantity,\n          },\n        })\n\n        // Update location stock\n        await databaseService.updateLocationStock(\n          item.productId,\n          data.locationId,\n          item.receivedQuantity || item.quantity,\n          'add'\n        )\n\n        // Create ledger entry\n        await tx.ledgerEntry.create({\n          data: {\n            date: data.date,\n            type: 'RECEIPT',\n            referenceId: receipt.id,\n            productId: item.productId,\n            quantity: item.receivedQuantity || item.quantity,\n            toLocationId: data.locationId,\n            notes: `Received from ${data.supplier}`,\n          },\n        })\n      }\n\n      return receipt.id\n    })\n  },\n\n  // Delivery operations\n  createDelivery: async (data: CreateDeliveryData) => {\n    return await prisma.$transaction(async (tx) => {\n      const delivery = await tx.delivery.create({\n        data: {\n          date: data.date,\n          customer: data.customer,\n          totalItems: data.items.length,\n          notes: data.notes,\n          status: 'DONE',\n        },\n      })\n\n      // Create delivery items and update stock\n      for (const item of data.items) {\n        await tx.deliveryItem.create({\n          data: {\n            deliveryId: delivery.id,\n            productId: item.productId,\n            quantity: item.quantity,\n            deliveredQuantity: item.deliveredQuantity || item.quantity,\n          },\n        })\n\n        // Update location stock (subtract from main warehouse)\n        await databaseService.updateLocationStock(\n          item.productId,\n          'main-warehouse',\n          item.deliveredQuantity || item.quantity,\n          'subtract'\n        )\n\n        // Create ledger entry\n        await tx.ledgerEntry.create({\n          data: {\n            date: data.date,\n            type: 'DELIVERY',\n            referenceId: delivery.id,\n            productId: item.productId,\n            quantity: -(item.deliveredQuantity || item.quantity),\n            fromLocationId: 'main-warehouse',\n            notes: `Delivered to ${data.customer}`,\n          },\n        })\n      }\n\n      return delivery.id\n    })\n  },\n\n  // Get operations data\n  getReceipts: async () => {\n    return await prisma.receipt.findMany({\n      include: {\n        items: {\n          include: {\n            product: true,\n          },\n        },\n        location: true,\n      },\n      orderBy: { date: 'desc' },\n    })\n  },\n\n  getDeliveries: async () => {\n    return await prisma.delivery.findMany({\n      include: {\n        items: {\n          include: {\n            product: true,\n          },\n        },\n      },\n      orderBy: { date: 'desc' },\n    })\n  },\n\n  getTransfers: async () => {\n    return await prisma.transfer.findMany({\n      include: {\n        items: {\n          include: {\n            product: true,\n          },\n        },\n        fromLocation: true,\n        toLocation: true,\n      },\n      orderBy: { date: 'desc' },\n    })\n  },\n\n  getAdjustments: async () => {\n    return await prisma.adjustment.findMany({\n      include: {\n        items: {\n          include: {\n            product: true,\n          },\n        },\n        location: true,\n      },\n      orderBy: { date: 'desc' },\n    })\n  },\n\n  getLedgerEntries: async () => {\n    return await prisma.ledgerEntry.findMany({\n      include: {\n        product: true,\n        fromLocation: true,\n        toLocation: true,\n      },\n      orderBy: { date: 'desc' },\n    })\n  },\n\n  getLocations: async () => {\n    return await prisma.location.findMany({\n      include: {\n        warehouse: true,\n      },\n      orderBy: { name: 'asc' },\n    })\n  },\n\n  getWarehouses: async () => {\n    return await prisma.warehouse.findMany({\n      include: {\n        locations: true,\n      },\n      orderBy: { name: 'asc' },\n    })\n  },\n\n  getLowStockProducts: async () => {\n    return await prisma.product.findMany({\n      where: {\n        AND: [\n          { reorderLevel: { not: null } },\n          {\n            stock: {\n              lte: prisma.product.fields.reorderLevel,\n            },\n          },\n        ],\n      },\n      include: {\n        locationStocks: {\n          include: {\n            location: true,\n          },\n        },\n      },\n    })\n  },\n\n  getOperationStats: async () => {\n    const [\n      totalProducts,\n      lowStockItems,\n      outOfStockItems,\n      pendingReceipts,\n      pendingDeliveries,\n      scheduledTransfers,\n    ] = await Promise.all([\n      prisma.product.count(),\n      prisma.product.count({\n        where: { stock: { lt: 20 } },\n      }),\n      prisma.product.count({\n        where: { stock: 0 },\n      }),\n      prisma.receipt.count({\n        where: { status: { in: ['WAITING', 'DRAFT'] } },\n      }),\n      prisma.delivery.count({\n        where: { status: { in: ['WAITING', 'DRAFT'] } },\n      }),\n      prisma.transfer.count({\n        where: { status: { in: ['WAITING', 'DRAFT'] } },\n      }),\n    ])\n\n    return {\n      totalProducts,\n      lowStockItems,\n      outOfStockItems,\n      pendingReceipts,\n      pendingDeliveries,\n      scheduledTransfers,\n    }\n  },\n}\n\n// Export Prisma types for use in components\nexport type {\n  Product,\n  Receipt,\n  Delivery,\n  Transfer,\n  Adjustment,\n  LedgerEntry,\n  Location,\n  Warehouse,\n  User,\n  OperationStatus,\n  Role,\n  LedgerType,\n  LocationType,\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 606, "column": 0}, "map": {"version":3,"sources":["file:///Users/yugansh/Downloads/inventory-management-system%20%281%29/app/api/database/init/route.ts"],"sourcesContent":["// API route to initialize the database with default data\nimport { NextRequest, NextResponse } from 'next/server'\nimport { databaseService } from '@/database/database-service'\n\nexport async function POST(request: NextRequest) {\n  try {\n    await databaseService.initializeDatabase()\n    \n    return NextResponse.json({ \n      success: true, \n      message: 'Database initialized successfully' \n    })\n  } catch (error) {\n    console.error('Database initialization error:', error)\n    \n    return NextResponse.json(\n      { \n        success: false, \n        error: 'Failed to initialize database',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      },\n      { status: 500 }\n    )\n  }\n}\n\nexport async function GET(request: NextRequest) {\n  try {\n    // Check database status\n    const stats = await databaseService.getOperationStats()\n    \n    return NextResponse.json({\n      success: true,\n      message: 'Database is accessible',\n      stats\n    })\n  } catch (error) {\n    console.error('Database status check error:', error)\n    \n    return NextResponse.json(\n      {\n        success: false,\n        error: 'Database not accessible',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      },\n      { status: 500 }\n    )\n  }\n}\n"],"names":[],"mappings":"AAAA,yDAAyD;;;;;;;AACzD;AACA;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,oJAAe,CAAC,kBAAkB;QAExC,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;QACX;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAEhD,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,OAAO;YACP,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QACpD,GACA;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,wBAAwB;QACxB,MAAM,QAAQ,MAAM,oJAAe,CAAC,iBAAiB;QAErD,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;YACT;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gCAAgC;QAE9C,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,OAAO;YACP,SAAS,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QACpD,GACA;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}