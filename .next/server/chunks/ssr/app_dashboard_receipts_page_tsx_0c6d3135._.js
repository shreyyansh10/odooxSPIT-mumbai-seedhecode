module.exports=[91088,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(88405),e=a.i(3130),f=a.i(40695),g=a.i(5522),h=a.i(15618),i=a.i(87532),j=a.i(77156),k=a.i(17171),l=a.i(87682),m=a.i(33508),n=a.i(81560);function o({onClose:a}){let{products:e,locations:i,addReceipt:j,addLedgerEntry:o,updateLocationStock:p}=(0,d.useStore)(),[q,r]=(0,c.useState)(1),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(new Date().toISOString().split("T")[0]),[y,z]=(0,c.useState)([{productId:"",quantity:0,locationId:""}]),[A,B]=(0,c.useState)(""),C=(a,b,c)=>{let d=[...y];d[a]={...d[a],[b]:"quantity"===b?Number.parseInt(c)||0:c},z(d)};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border sticky top-0 bg-card z-10",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Create New Receipt"}),(0,b.jsx)("button",{onClick:a,className:"p-1 hover:bg-secondary rounded-lg transition-colors",children:(0,b.jsx)(m.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsx)("div",{className:"flex gap-4 mb-6",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:`flex-1 h-1 rounded-full ${a<=q?"bg-accent":"bg-secondary"}`},a))}),1===q&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground",children:"Supplier Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{htmlFor:"supplier",className:"text-sm font-medium text-foreground mb-2",children:"Supplier Name"}),(0,b.jsx)(g.Input,{id:"supplier",placeholder:"Enter supplier name",value:s,onChange:a=>t(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{htmlFor:"invoice",className:"text-sm font-medium text-foreground mb-2",children:"Invoice Number"}),(0,b.jsx)(g.Input,{id:"invoice",placeholder:"e.g., INV-12345",value:u,onChange:a=>v(a.target.value)})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{htmlFor:"date",className:"text-sm font-medium text-foreground mb-2",children:"Receipt Date"}),(0,b.jsx)(g.Input,{id:"date",type:"date",value:w,onChange:a=>x(a.target.value)})]})]}),2===q&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground",children:"Add Items"}),(0,b.jsx)("div",{className:"space-y-3 max-h-[300px] overflow-y-auto",children:y.map((a,c)=>(0,b.jsxs)("div",{className:"grid grid-cols-12 gap-2",children:[(0,b.jsxs)(l.Select,{value:a.productId,onValueChange:a=>C(c,"productId",a),children:[(0,b.jsx)(l.SelectTrigger,{className:"col-span-5",children:(0,b.jsx)(l.SelectValue,{placeholder:"Select product"})}),(0,b.jsx)(l.SelectContent,{children:e.map(a=>(0,b.jsxs)(l.SelectItem,{value:a.id,children:[a.name," (",a.sku,")"]},a.id))})]}),(0,b.jsxs)(l.Select,{value:a.locationId,onValueChange:a=>C(c,"locationId",a),children:[(0,b.jsx)(l.SelectTrigger,{className:"col-span-3",children:(0,b.jsx)(l.SelectValue,{placeholder:"Location"})}),(0,b.jsx)(l.SelectContent,{children:i.map(a=>(0,b.jsx)(l.SelectItem,{value:a.id,children:a.name},a.id))})]}),(0,b.jsx)(g.Input,{type:"number",placeholder:"Qty",value:a.quantity||"",onChange:a=>C(c,"quantity",a.target.value),className:"col-span-3"}),(0,b.jsx)(f.Button,{size:"sm",variant:"ghost",onClick:()=>{z(y.filter((a,b)=>b!==c))},className:"col-span-1 h-10 w-10 p-0",children:(0,b.jsx)(n.Trash2,{className:"w-4 h-4 text-destructive"})})]},c))}),(0,b.jsxs)(f.Button,{onClick:()=>{z([...y,{productId:"",quantity:0,locationId:""}])},variant:"outline",className:"w-full gap-2 bg-transparent",children:[(0,b.jsx)(h.Plus,{className:"w-4 h-4"}),"Add Another Item"]})]}),3===q&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground",children:"Review Receipt"}),(0,b.jsxs)("div",{className:"bg-secondary/50 rounded-lg p-4 space-y-2 text-sm",children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Supplier:"}),(0,b.jsx)("span",{className:"text-foreground ml-2 font-medium",children:s})]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Invoice:"}),(0,b.jsx)("span",{className:"text-foreground ml-2 font-medium",children:u})]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Date:"}),(0,b.jsx)("span",{className:"text-foreground ml-2 font-medium",children:w})]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Items:"}),(0,b.jsxs)("span",{className:"text-foreground ml-2 font-medium",children:[y.length," products"]})]})]}),(0,b.jsxs)("div",{className:"bg-secondary/50 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-foreground mb-2",children:"Items:"}),(0,b.jsx)("div",{className:"space-y-1 text-sm",children:y.map(a=>{let c=e.find(b=>b.id===a.productId);return(0,b.jsxs)("p",{className:"text-muted-foreground",children:[c?.name," - ",a.quantity," ",c?.uom]},a.productId)})})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-border",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>r(Math.max(1,q-1)),disabled:1===q,className:"flex-1",children:"Back"}),(0,b.jsx)(f.Button,{type:"button",onClick:()=>{q<3?r(q+1):(()=>{if(!s||!u||y.some(a=>!a.productId||a.quantity<=0||!a.locationId))return alert("Please fill in all required fields including location");let b=j({date:w,supplier:s,status:"Done",items:y,totalItems:y.length,notes:A});y.forEach(a=>{e.find(b=>b.id===a.productId)&&(p(a.productId,a.locationId,a.quantity,"add"),o({date:w,type:"receipt",referenceId:b,productId:a.productId,quantity:a.quantity,toLocation:a.locationId,notes:`Receipt from ${s}`}))}),alert("Receipt created successfully!"),a()})()},className:"flex-1",children:3===q?"Create Receipt":"Next"})]})]})]})})}var p=a.i(65733),q=a.i(54161),r=a.i(83497),s=a.i(41675),t=a.i(46842),u=a.i(4720),v=a.i(71931),w=a.i(84505);function x({receipt:a,onClose:c}){let{products:g}=(0,d.useStore)();return(0,b.jsx)(p.Dialog,{open:!0,onOpenChange:c,children:(0,b.jsxs)(p.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(p.DialogHeader,{children:(0,b.jsxs)(p.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(u.FileText,{className:"w-5 h-5"}),"Receipt Details"]})}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(e.Card,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold",children:["#",a.id.slice(0,8)]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Receipt ID"})]}),(0,b.jsx)(q.Badge,{variant:"secondary",className:(a=>{switch(a){case"Done":return"bg-green-500/20 text-green-600 dark:text-green-400";case"Waiting":case"Ready":return"bg-yellow-500/20 text-yellow-600 dark:text-yellow-400";case"Draft":default:return"bg-gray-500/20 text-gray-600 dark:text-gray-400";case"Canceled":return"bg-red-500/20 text-red-600 dark:text-red-400"}})(a.status),children:a.status})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(t.User,{className:"w-4 h-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.supplier}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Supplier"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Calendar,{className:"w-4 h-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.date}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Receipt Date"})]})]})]})]}),(0,b.jsxs)(e.Card,{className:"p-4",children:[(0,b.jsxs)("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[(0,b.jsx)(r.Package,{className:"w-4 h-4"}),"Items (",a.totalItems,")"]}),(0,b.jsx)("div",{className:"space-y-3",children:a.items.map((a,c)=>{let d=g.find(b=>b.id===a.productId);return(0,b.jsxs)("div",{className:"flex justify-between items-center p-3 bg-secondary/30 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium",children:d?.name||"Unknown Product"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["SKU: ",d?.sku||"N/A"]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"font-semibold",children:[a.quantity," ",d?.uom||""]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Quantity"})]})]},c)})})]}),(0,b.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,b.jsxs)(f.Button,{variant:"outline",onClick:()=>{let b=new Blob([`
RECEIPT DETAILS
===============

Receipt ID: ${a.id}
Supplier: ${a.supplier}
Date: ${a.date}
Status: ${a.status}
Total Items: ${a.totalItems}

ITEMS:
------
${a.items.map(a=>{let b=g.find(b=>b.id===a.productId);return`${b?.name||"Unknown Product"} - ${a.quantity} ${b?.uom||""}`}).join("\n")}

Generated on: ${new Date().toLocaleString()}
    `],{type:"text/plain"}),c=URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download=`receipt-${a.id.slice(0,8)}.txt`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(c)},className:"gap-2",children:[(0,b.jsx)(w.Download,{className:"w-4 h-4"}),"Download"]}),(0,b.jsxs)(f.Button,{variant:"outline",onClick:()=>{window.print()},className:"gap-2",children:[(0,b.jsx)(v.Printer,{className:"w-4 h-4"}),"Print"]}),(0,b.jsx)(f.Button,{onClick:c,children:"Close"})]})]})]})})}function y(){let{receipts:a,addLedgerEntry:k}=(0,d.useStore)(),[l,m]=(0,c.useState)(""),[n,p]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),t=a.filter(a=>a.id.toLowerCase().includes(l.toLowerCase())||a.supplier.toLowerCase().includes(l.toLowerCase())),u={total:a.length,done:a.filter(a=>"Done"===a.status).length,waiting:a.filter(a=>"Waiting"===a.status||"Draft"===a.status).length,totalItems:a.reduce((a,b)=>a+b.totalItems,0)};return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Receipts"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Incoming stock from suppliers and vendors"})]}),(0,b.jsxs)(f.Button,{onClick:()=>p(!0),className:"gap-2",children:[(0,b.jsx)(h.Plus,{className:"w-4 h-4"}),"New Receipt"]})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,b.jsxs)(e.Card,{className:"p-4 border border-border bg-card/50",children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Total Receipts"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-foreground mt-1",children:u.total})]}),(0,b.jsxs)(e.Card,{className:"p-4 border border-border bg-card/50",children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Completed"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:u.done})]}),(0,b.jsxs)(e.Card,{className:"p-4 border border-border bg-card/50",children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Pending"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:u.waiting})]}),(0,b.jsxs)(e.Card,{className:"p-4 border border-border bg-card/50",children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Total Items"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-foreground mt-1",children:u.totalItems})]})]}),(0,b.jsxs)(e.Card,{className:"p-6 border border-border bg-card/50",children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsxs)("div",{className:"flex-1 relative max-w-sm",children:[(0,b.jsx)(i.Search,{className:"absolute left-3 top-3 w-5 h-5 text-muted-foreground"}),(0,b.jsx)(g.Input,{placeholder:"Search by receipt ID or supplier...",value:l,onChange:a=>m(a.target.value),className:"pl-10"})]})}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-border",children:[(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Receipt ID"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Supplier"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Date"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Items"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Status"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:t.length>0?t.map(a=>(0,b.jsxs)("tr",{className:"border-b border-border hover:bg-secondary/50 transition-colors",children:[(0,b.jsx)("td",{className:"py-3 px-4 font-mono text-xs",children:a.id.slice(0,8)}),(0,b.jsx)("td",{className:"py-3 px-4",children:a.supplier}),(0,b.jsx)("td",{className:"py-3 px-4 text-muted-foreground",children:a.date}),(0,b.jsx)("td",{className:"py-3 px-4",children:a.totalItems}),(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsx)(q.Badge,{variant:"secondary",className:(a=>{switch(a){case"Done":return"bg-green-500/20 text-green-600 dark:text-green-400";case"Waiting":case"Ready":return"bg-yellow-500/20 text-yellow-600 dark:text-yellow-400";case"Draft":default:return"bg-gray-500/20 text-gray-600 dark:text-gray-400";case"Canceled":return"bg-red-500/20 text-red-600 dark:text-red-400"}})(a.status),children:a.status})}),(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsxs)(f.Button,{variant:"ghost",size:"sm",onClick:()=>s(a),className:"gap-1",children:[(0,b.jsx)(j.Eye,{className:"w-4 h-4"}),"View"]})})]},a.id)):(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:6,className:"py-8 text-center text-muted-foreground",children:"No receipts found"})})})]})})]}),n&&(0,b.jsx)(o,{onClose:()=>p(!1)}),r&&(0,b.jsx)(x,{receipt:r,onClose:()=>s(null)})]})}a.s(["default",()=>y],91088)}];

//# sourceMappingURL=app_dashboard_receipts_page_tsx_0c6d3135._.js.map