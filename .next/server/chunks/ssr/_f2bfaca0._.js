module.exports=[3130,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}a.s(["Card",()=>d])},5522,a=>{"use strict";var b=a.i(87924),c=a.i(97895);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,"data-slot":"input",className:(0,c.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...e})}a.s(["Input",()=>d])},77994,a=>{"use strict";var b=a.i(72131);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},17171,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(30553),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(97895);function g({className:a,...c}){return(0,b.jsx)(e,{"data-slot":"label",className:(0,f.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...c})}a.s(["Label",()=>g],17171)},95224,a=>{"use strict";var b=a.i(87924),c=a.i(88405),d=a.i(3130),e=a.i(40695),f=a.i(5522),g=a.i(15618),h=a.i(87532),i=a.i(72131),j=a.i(17171),k=a.i(87682),l=a.i(33508);function m({onClose:a}){let{products:d,locations:g,addAdjustment:h,addLedgerEntry:m,updateLocationStock:n}=(0,c.useStore)(),[o,p]=(0,i.useState)(""),[q,r]=(0,i.useState)(""),[s,t]=(0,i.useState)(""),[u,v]=(0,i.useState)(0),[w,x]=(0,i.useState)(""),y=d.find(a=>a.id===o),z=y?.locationStock[q]||0,A=u-z;return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg w-full max-w-md",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Create Adjustment"}),(0,b.jsx)("button",{onClick:a,className:"p-1 hover:bg-secondary rounded-lg transition-colors",children:(0,b.jsx)(l.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{htmlFor:"product",className:"text-sm font-medium text-foreground mb-2",children:"Product"}),(0,b.jsxs)(k.Select,{value:o,onValueChange:p,children:[(0,b.jsx)(k.SelectTrigger,{id:"product",children:(0,b.jsx)(k.SelectValue,{placeholder:"Select product"})}),(0,b.jsx)(k.SelectContent,{children:d.map(a=>(0,b.jsxs)(k.SelectItem,{value:a.id,children:[a.name," (Current: ",a.stock,")"]},a.id))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{htmlFor:"location",className:"text-sm font-medium text-foreground mb-2",children:"Location"}),(0,b.jsxs)(k.Select,{value:q,onValueChange:r,children:[(0,b.jsx)(k.SelectTrigger,{id:"location",children:(0,b.jsx)(k.SelectValue,{placeholder:"Select location"})}),(0,b.jsx)(k.SelectContent,{children:g.map(a=>(0,b.jsx)(k.SelectItem,{value:a.name,children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{htmlFor:"reason",className:"text-sm font-medium text-foreground mb-2",children:"Reason for Adjustment"}),(0,b.jsxs)(k.Select,{value:s,onValueChange:t,children:[(0,b.jsx)(k.SelectTrigger,{id:"reason",children:(0,b.jsx)(k.SelectValue,{placeholder:"Select reason"})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"Damage/Loss",children:"Damage/Loss"}),(0,b.jsx)(k.SelectItem,{value:"Inventory Count",children:"Inventory Count"}),(0,b.jsx)(k.SelectItem,{value:"Expired Stock",children:"Expired Stock"}),(0,b.jsx)(k.SelectItem,{value:"Quality Check",children:"Quality Check"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{htmlFor:"current",className:"text-sm font-medium text-foreground mb-2",children:"Current Qty"}),(0,b.jsx)(f.Input,{id:"current",type:"number",value:z,disabled:!0,className:"bg-secondary/50"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(j.Label,{htmlFor:"counted",className:"text-sm font-medium text-foreground mb-2",children:"Counted Qty"}),(0,b.jsx)(f.Input,{id:"counted",type:"number",value:u,onChange:a=>v(Number.parseInt(a.target.value)||0),placeholder:"0"})]})]}),0!==A&&(0,b.jsxs)("div",{className:`p-3 rounded-lg text-sm font-medium ${A>0?"bg-green-500/20 text-green-600 dark:text-green-400":"bg-red-500/20 text-red-600 dark:text-red-400"}`,children:["Variance: ",A>0?"+":"",A]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-border",children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:a,className:"flex-1 bg-transparent",children:"Cancel"}),(0,b.jsx)(e.Button,{type:"button",onClick:()=>{if(!o||!q||!s)return void alert("Please fill in all required fields");let b=h({date:new Date().toISOString().split("T")[0],location:q,status:"Done",items:[{productId:o,countedQuantity:u,variance:A}],reason:s,notes:w});n(o,q,u,"set"),m({date:new Date().toISOString().split("T")[0],type:"adjustment",referenceId:b,productId:o,quantity:A,toLocation:q,notes:`Adjustment: ${s} - Variance: ${A}`}),alert("Adjustment created successfully!"),a()},className:"flex-1",children:"Create Adjustment"})]})]})]})})}var n=a.i(54161);function o(){let{adjustments:a}=(0,c.useStore)(),[j,k]=(0,i.useState)(""),[l,o]=(0,i.useState)(!1),p=a.filter(a=>a.id.toLowerCase().includes(j.toLowerCase())||a.reason.toLowerCase().includes(j.toLowerCase())),q={total:a.length,done:a.filter(a=>"Done"===a.status).length,draft:a.filter(a=>"Draft"===a.status).length,totalVariance:a.reduce((a,b)=>a+b.items.reduce((a,b)=>a+b.variance,0),0)};return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Adjustments"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Stock count corrections and discrepancies"})]}),(0,b.jsxs)(e.Button,{onClick:()=>o(!0),className:"gap-2",children:[(0,b.jsx)(g.Plus,{className:"w-4 h-4"}),"New Adjustment"]})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,b.jsxs)(d.Card,{className:"p-4 border border-border bg-card/50",children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Total Adjustments"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-foreground mt-1",children:q.total})]}),(0,b.jsxs)(d.Card,{className:"p-4 border border-border bg-card/50",children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Completed"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:q.done})]}),(0,b.jsxs)(d.Card,{className:"p-4 border border-border bg-card/50",children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Draft"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:q.draft})]}),(0,b.jsxs)(d.Card,{className:"p-4 border border-border bg-card/50",children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Total Variance"}),(0,b.jsxs)("p",{className:`text-2xl font-bold mt-1 ${q.totalVariance<0?"text-destructive":"text-green-600 dark:text-green-400"}`,children:[q.totalVariance>0?"+":"",q.totalVariance]})]})]}),(0,b.jsxs)(d.Card,{className:"p-6 border border-border bg-card/50",children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsxs)("div",{className:"flex-1 relative max-w-sm",children:[(0,b.jsx)(h.Search,{className:"absolute left-3 top-3 w-5 h-5 text-muted-foreground"}),(0,b.jsx)(f.Input,{placeholder:"Search by adjustment ID or reason...",value:j,onChange:a=>k(a.target.value),className:"pl-10"})]})}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-border",children:[(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Adjustment ID"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Reason"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Location"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Variance"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Date"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Status"})]})}),(0,b.jsx)("tbody",{children:p.length>0?p.map(a=>(0,b.jsxs)("tr",{className:"border-b border-border hover:bg-secondary/50 transition-colors",children:[(0,b.jsx)("td",{className:"py-3 px-4 font-mono text-xs",children:a.id.slice(0,8)}),(0,b.jsx)("td",{className:"py-3 px-4",children:a.reason}),(0,b.jsx)("td",{className:"py-3 px-4",children:a.location}),(0,b.jsxs)("td",{className:"py-3 px-4",children:[a.items.reduce((a,b)=>a+b.variance,0)>0?"+":"",a.items.reduce((a,b)=>a+b.variance,0)]}),(0,b.jsx)("td",{className:"py-3 px-4 text-muted-foreground",children:a.date}),(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsx)(n.Badge,{variant:"secondary",className:(a=>{switch(a){case"Done":return"bg-green-500/20 text-green-600 dark:text-green-400";case"Draft":return"bg-yellow-500/20 text-yellow-600 dark:text-yellow-400";case"Canceled":return"bg-red-500/20 text-red-600 dark:text-red-400";default:return"bg-gray-500/20 text-gray-600 dark:text-gray-400"}})(a.status),children:a.status})})]},a.id)):(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:6,className:"py-8 text-center text-muted-foreground",children:"No adjustments found"})})})]})})]}),l&&(0,b.jsx)(m,{onClose:()=>o(!1)})]})}a.s(["default",()=>o],95224)}];

//# sourceMappingURL=_f2bfaca0._.js.map