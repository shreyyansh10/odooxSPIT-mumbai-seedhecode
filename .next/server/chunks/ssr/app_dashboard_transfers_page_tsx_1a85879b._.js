module.exports=[83046,a=>{"use strict";var b=a.i(87924),c=a.i(88405),d=a.i(3130),e=a.i(40695),f=a.i(5522),g=a.i(15618),h=a.i(87532),i=a.i(77156),j=a.i(72131),k=a.i(17171),l=a.i(87682),m=a.i(33508),n=a.i(81560);function o({onClose:a}){let{products:d,locations:h,addTransfer:i,addLedgerEntry:o,updateLocationStock:p}=(0,c.useStore)(),[q,r]=(0,j.useState)(1),[s,t]=(0,j.useState)(""),[u,v]=(0,j.useState)(""),[w,x]=(0,j.useState)(new Date().toISOString().split("T")[0]),[y,z]=(0,j.useState)([{productId:"",quantity:0}]),[A,B]=(0,j.useState)(""),C=(a,b,c)=>{let d=[...y];d[a]={...d[a],[b]:"quantity"===b?Number.parseInt(c)||0:c},z(d)};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border sticky top-0 bg-card z-10",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Create Internal Transfer"}),(0,b.jsx)("button",{onClick:a,className:"p-1 hover:bg-secondary rounded-lg transition-colors",children:(0,b.jsx)(m.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsx)("div",{className:"flex gap-4 mb-6",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:`flex-1 h-1 rounded-full ${a<=q?"bg-accent":"bg-secondary"}`},a))}),1===q&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground",children:"Transfer Locations"}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{htmlFor:"from",className:"text-sm font-medium text-foreground mb-2",children:"From Location"}),(0,b.jsxs)(l.Select,{value:s,onValueChange:t,children:[(0,b.jsx)(l.SelectTrigger,{id:"from",children:(0,b.jsx)(l.SelectValue,{placeholder:"Select source location"})}),(0,b.jsx)(l.SelectContent,{children:h.map(a=>(0,b.jsx)(l.SelectItem,{value:a.name,children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{htmlFor:"to",className:"text-sm font-medium text-foreground mb-2",children:"To Location"}),(0,b.jsxs)(l.Select,{value:u,onValueChange:v,children:[(0,b.jsx)(l.SelectTrigger,{id:"to",children:(0,b.jsx)(l.SelectValue,{placeholder:"Select destination location"})}),(0,b.jsx)(l.SelectContent,{children:h.map(a=>(0,b.jsx)(l.SelectItem,{value:a.name,children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{htmlFor:"transfer-date",className:"text-sm font-medium text-foreground mb-2",children:"Transfer Date"}),(0,b.jsx)(f.Input,{id:"transfer-date",type:"date",value:w,onChange:a=>x(a.target.value)})]})]}),2===q&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground",children:"Select Products"}),(0,b.jsx)("div",{className:"space-y-3 max-h-[300px] overflow-y-auto",children:y.map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(l.Select,{value:a.productId,onValueChange:a=>C(c,"productId",a),children:[(0,b.jsx)(l.SelectTrigger,{className:"flex-1",children:(0,b.jsx)(l.SelectValue,{placeholder:"Select product"})}),(0,b.jsx)(l.SelectContent,{children:d.map(a=>(0,b.jsxs)(l.SelectItem,{value:a.id,children:[a.name," (Stock: ",a.stock,")"]},a.id))})]}),(0,b.jsx)(f.Input,{type:"number",placeholder:"Quantity",value:a.quantity||"",onChange:a=>C(c,"quantity",a.target.value),className:"w-24"}),(0,b.jsx)(e.Button,{size:"sm",variant:"ghost",onClick:()=>{z(y.filter((a,b)=>b!==c))},className:"h-10 w-10 p-0",children:(0,b.jsx)(n.Trash2,{className:"w-4 h-4 text-destructive"})})]},c))}),(0,b.jsxs)(e.Button,{onClick:()=>{z([...y,{productId:"",quantity:0}])},variant:"outline",className:"w-full gap-2 bg-transparent",children:[(0,b.jsx)(g.Plus,{className:"w-4 h-4"}),"Add Another Item"]})]}),3===q&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground",children:"Review Transfer"}),(0,b.jsxs)("div",{className:"bg-secondary/50 rounded-lg p-4 space-y-2 text-sm",children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"From:"}),(0,b.jsx)("span",{className:"text-foreground ml-2 font-medium",children:s})]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"To:"}),(0,b.jsx)("span",{className:"text-foreground ml-2 font-medium",children:u})]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Date:"}),(0,b.jsx)("span",{className:"text-foreground ml-2 font-medium",children:w})]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Items:"}),(0,b.jsxs)("span",{className:"text-foreground ml-2 font-medium",children:[y.length," products"]})]})]}),(0,b.jsxs)("div",{className:"bg-secondary/50 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-foreground mb-2",children:"Items to Transfer:"}),(0,b.jsx)("div",{className:"space-y-1 text-sm",children:y.map(a=>{let c=d.find(b=>b.id===a.productId);return(0,b.jsxs)("p",{className:"text-muted-foreground",children:[c?.name," - ",a.quantity," ",c?.uom]},a.productId)})})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-border",children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:()=>r(Math.max(1,q-1)),disabled:1===q,className:"flex-1",children:"Back"}),(0,b.jsx)(e.Button,{type:"button",onClick:()=>{q<3?r(q+1):(()=>{if(!s||!u||y.some(a=>!a.productId||a.quantity<=0))return alert("Please fill in all required fields");let b=i({date:w,fromLocation:s,toLocation:u,status:"Done",items:y,totalItems:y.length,notes:A});y.forEach(a=>{d.find(b=>b.id===a.productId)&&(p(a.productId,s,a.quantity,"subtract"),p(a.productId,u,a.quantity,"add"),o({date:w,type:"transfer",referenceId:b,productId:a.productId,quantity:a.quantity,fromLocation:s,toLocation:u,notes:`Transferred from ${s} to ${u}`}))}),alert("Transfer created successfully!"),a()})()},className:"flex-1",children:3===q?"Create Transfer":"Next"})]})]})]})})}var p=a.i(54161),q=a.i(83497),r=a.i(32860);function s({transfer:a,onClose:d}){let{products:f,getLocationStock:g}=(0,c.useStore)(),h=a=>f.find(b=>b.id===a);return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border sticky top-0 bg-card z-10",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Transfer Details"}),(0,b.jsx)("button",{onClick:d,className:"p-1 hover:bg-secondary rounded-lg transition-colors",children:(0,b.jsx)(m.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"bg-secondary/50 rounded-lg p-4 space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground",children:"Transfer Summary"}),(0,b.jsx)(p.Badge,{variant:"secondary",className:(a=>{switch(a){case"Done":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"Waiting":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"Draft":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300";default:return"bg-secondary text-secondary-foreground"}})(a.status),children:a.status})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Transfer ID:"}),(0,b.jsx)("span",{className:"text-foreground ml-2 font-mono",children:a.id})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Date:"}),(0,b.jsx)("span",{className:"text-foreground ml-2",children:a.date})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Total Items:"}),(0,b.jsx)("span",{className:"text-foreground ml-2 font-medium",children:a.totalItems})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Total Quantity:"}),(0,b.jsx)("span",{className:"text-foreground ml-2 font-medium",children:a.items?.reduce((a,b)=>a+b.quantity,0)||0})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-background rounded-lg border",children:[(0,b.jsxs)("div",{className:"flex-1 text-center",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"From"}),(0,b.jsx)("p",{className:"font-semibold text-foreground",children:a.fromLocation})]}),(0,b.jsx)(r.ArrowRight,{className:"w-5 h-5 text-muted-foreground"}),(0,b.jsxs)("div",{className:"flex-1 text-center",children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"To"}),(0,b.jsx)("p",{className:"font-semibold text-foreground",children:a.toLocation})]})]}),a.notes&&(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Notes:"}),(0,b.jsx)("p",{className:"text-foreground mt-1 text-sm",children:a.notes})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground mb-4",children:"Transferred Items"}),(0,b.jsx)("div",{className:"space-y-3",children:a.items?.map((c,d)=>{let e=h(c.productId),f=g(c.productId,a.fromLocation),i=g(c.productId,a.toLocation);return(0,b.jsx)("div",{className:"bg-secondary/30 rounded-lg p-4 border",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-accent rounded-lg flex items-center justify-center",children:(0,b.jsx)(q.Package,{className:"w-5 h-5 text-accent-foreground"})}),(0,b.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h4",{className:"font-medium text-foreground",children:e?.name||"Unknown Product"}),(0,b.jsx)("span",{className:"text-sm font-mono text-muted-foreground",children:e?.sku})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Transferred:"}),(0,b.jsxs)("p",{className:"font-semibold text-foreground",children:[c.quantity," ",e?.uom||"units"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"From Stock:"}),(0,b.jsxs)("p",{className:"font-semibold text-foreground",children:[f," ",e?.uom||"units"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"To Stock:"}),(0,b.jsxs)("p",{className:"font-semibold text-foreground",children:[i," ",e?.uom||"units"]})]})]}),e?.category&&(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Category: ",e.category]})]})]})},d)})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground mb-4",children:"Current Stock Levels"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4",children:[(0,b.jsx)("h4",{className:"font-medium text-blue-800 dark:text-blue-300 mb-2",children:a.fromLocation}),(0,b.jsx)("div",{className:"space-y-1",children:a.items?.map((c,d)=>{let e=h(c.productId),f=g(c.productId,a.fromLocation);return(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-blue-700 dark:text-blue-400",children:e?.name}),(0,b.jsxs)("span",{className:"font-mono text-blue-800 dark:text-blue-300",children:[f," ",e?.uom]})]},d)})})]}),(0,b.jsxs)("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-4",children:[(0,b.jsx)("h4",{className:"font-medium text-green-800 dark:text-green-300 mb-2",children:a.toLocation}),(0,b.jsx)("div",{className:"space-y-1",children:a.items?.map((c,d)=>{let e=h(c.productId),f=g(c.productId,a.toLocation);return(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-green-700 dark:text-green-400",children:e?.name}),(0,b.jsxs)("span",{className:"font-mono text-green-800 dark:text-green-300",children:[f," ",e?.uom]})]},d)})})]})]})]})]}),(0,b.jsx)("div",{className:"p-6 border-t border-border",children:(0,b.jsx)(e.Button,{onClick:d,className:"w-full",children:"Close"})})]})})}function t(){let{transfers:a}=(0,c.useStore)(),[k,l]=(0,j.useState)(""),[m,n]=(0,j.useState)(!1),[q,r]=(0,j.useState)(!1),[t,u]=(0,j.useState)(null),v=a.filter(a=>a.id.toLowerCase().includes(k.toLowerCase())||a.fromLocation.toLowerCase().includes(k.toLowerCase())),w={total:a.length,done:a.filter(a=>"Done"===a.status).length,pending:a.filter(a=>"Waiting"===a.status||"Draft"===a.status).length,totalMoved:a.reduce((a,b)=>a+b.totalItems,0)};return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Internal Transfers"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Move stock between locations and warehouses"})]}),(0,b.jsxs)(e.Button,{onClick:()=>n(!0),className:"gap-2",children:[(0,b.jsx)(g.Plus,{className:"w-4 h-4"}),"New Transfer"]})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,b.jsxs)(d.Card,{className:"p-4 border border-border bg-card/50",children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Total Transfers"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-foreground mt-1",children:w.total})]}),(0,b.jsxs)(d.Card,{className:"p-4 border border-border bg-card/50",children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Completed"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:w.done})]}),(0,b.jsxs)(d.Card,{className:"p-4 border border-border bg-card/50",children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Pending"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:w.pending})]}),(0,b.jsxs)(d.Card,{className:"p-4 border border-border bg-card/50",children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Total Moved"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-foreground mt-1",children:w.totalMoved})]})]}),(0,b.jsxs)(d.Card,{className:"p-6 border border-border bg-card/50",children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsxs)("div",{className:"flex-1 relative max-w-sm",children:[(0,b.jsx)(h.Search,{className:"absolute left-3 top-3 w-5 h-5 text-muted-foreground"}),(0,b.jsx)(f.Input,{placeholder:"Search by transfer ID or location...",value:k,onChange:a=>l(a.target.value),className:"pl-10"})]})}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-border",children:[(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Transfer ID"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"From"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"To"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Date"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Items"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Status"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:v.length>0?v.map(a=>(0,b.jsxs)("tr",{className:"border-b border-border hover:bg-secondary/50 transition-colors",children:[(0,b.jsx)("td",{className:"py-3 px-4 font-mono text-xs",children:a.id.slice(0,8)}),(0,b.jsx)("td",{className:"py-3 px-4",children:a.fromLocation}),(0,b.jsx)("td",{className:"py-3 px-4",children:a.toLocation}),(0,b.jsx)("td",{className:"py-3 px-4 text-muted-foreground",children:a.date}),(0,b.jsx)("td",{className:"py-3 px-4",children:a.totalItems}),(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsx)(p.Badge,{variant:"secondary",className:(a=>{switch(a){case"Done":return"bg-green-500/20 text-green-600 dark:text-green-400";case"Ready":case"Waiting":return"bg-blue-500/20 text-blue-600 dark:text-blue-400";case"Draft":return"bg-yellow-500/20 text-yellow-600 dark:text-yellow-400";case"Canceled":return"bg-red-500/20 text-red-600 dark:text-red-400";default:return"bg-gray-500/20 text-gray-600 dark:text-gray-400"}})(a.status),children:a.status})}),(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsxs)(e.Button,{size:"sm",variant:"ghost",onClick:()=>{u(a),r(!0)},className:"gap-2",children:[(0,b.jsx)(i.Eye,{className:"w-4 h-4"}),"View"]})})]},a.id)):(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:7,className:"py-8 text-center text-muted-foreground",children:"No transfers found"})})})]})})]}),m&&(0,b.jsx)(o,{onClose:()=>n(!1)}),q&&t&&(0,b.jsx)(s,{transfer:t,onClose:()=>{r(!1),u(null)}})]})}a.s(["default",()=>t],83046)}];

//# sourceMappingURL=app_dashboard_transfers_page_tsx_1a85879b._.js.map