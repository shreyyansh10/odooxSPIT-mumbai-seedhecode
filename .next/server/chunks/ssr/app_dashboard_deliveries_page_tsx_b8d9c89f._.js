module.exports=[69265,a=>{"use strict";var b=a.i(87924),c=a.i(88405),d=a.i(3130),e=a.i(40695),f=a.i(5522),g=a.i(15618),h=a.i(87532),i=a.i(77156),j=a.i(72131),k=a.i(17171),l=a.i(87682),m=a.i(33508),n=a.i(81560);function o({onClose:a}){let{products:d,addDelivery:h,addLedgerEntry:i,updateLocationStock:o}=(0,c.useStore)(),[p,q]=(0,j.useState)(1),[r,s]=(0,j.useState)(""),[t,u]=(0,j.useState)(""),[v,w]=(0,j.useState)(new Date().toISOString().split("T")[0]),[x,y]=(0,j.useState)([{productId:"",quantity:0}]),[z,A]=(0,j.useState)(""),B=(a,b,c)=>{let d=[...x];d[a]={...d[a],[b]:"quantity"===b?Number.parseInt(c)||0:c},y(d)};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-card border border-border rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-border sticky top-0 bg-card z-10",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-foreground",children:"Create New Delivery"}),(0,b.jsx)("button",{onClick:a,className:"p-1 hover:bg-secondary rounded-lg transition-colors",children:(0,b.jsx)(m.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsx)("div",{className:"flex gap-4 mb-6",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:`flex-1 h-1 rounded-full ${a<=p?"bg-accent":"bg-secondary"}`},a))}),1===p&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground",children:"Customer Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{htmlFor:"customer",className:"text-sm font-medium text-foreground mb-2",children:"Customer Name"}),(0,b.jsx)(f.Input,{id:"customer",placeholder:"Enter customer name",value:r,onChange:a=>s(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{htmlFor:"order",className:"text-sm font-medium text-foreground mb-2",children:"Order Number"}),(0,b.jsx)(f.Input,{id:"order",placeholder:"e.g., ORD-12345",value:t,onChange:a=>u(a.target.value)})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{htmlFor:"date",className:"text-sm font-medium text-foreground mb-2",children:"Delivery Date"}),(0,b.jsx)(f.Input,{id:"date",type:"date",value:v,onChange:a=>w(a.target.value)})]})]}),2===p&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground",children:"Select Items"}),(0,b.jsx)("div",{className:"space-y-3 max-h-[300px] overflow-y-auto",children:x.map((a,c)=>(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(l.Select,{value:a.productId,onValueChange:a=>B(c,"productId",a),children:[(0,b.jsx)(l.SelectTrigger,{className:"flex-1",children:(0,b.jsx)(l.SelectValue,{placeholder:"Select product"})}),(0,b.jsx)(l.SelectContent,{children:d.map(a=>(0,b.jsxs)(l.SelectItem,{value:a.id,children:[a.name," (Stock: ",a.stock,")"]},a.id))})]}),(0,b.jsx)(f.Input,{type:"number",placeholder:"Quantity",value:a.quantity||"",onChange:a=>B(c,"quantity",a.target.value),className:"w-24"}),(0,b.jsx)(e.Button,{size:"sm",variant:"ghost",onClick:()=>{y(x.filter((a,b)=>b!==c))},className:"h-10 w-10 p-0",children:(0,b.jsx)(n.Trash2,{className:"w-4 h-4 text-destructive"})})]},c))}),(0,b.jsxs)(e.Button,{onClick:()=>{y([...x,{productId:"",quantity:0}])},variant:"outline",className:"w-full gap-2 bg-transparent",children:[(0,b.jsx)(g.Plus,{className:"w-4 h-4"}),"Add Another Item"]})]}),3===p&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground",children:"Review Delivery"}),(0,b.jsxs)("div",{className:"bg-secondary/50 rounded-lg p-4 space-y-2 text-sm",children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Customer:"}),(0,b.jsx)("span",{className:"text-foreground ml-2 font-medium",children:r})]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Order:"}),(0,b.jsx)("span",{className:"text-foreground ml-2 font-medium",children:t})]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Date:"}),(0,b.jsx)("span",{className:"text-foreground ml-2 font-medium",children:v})]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Items:"}),(0,b.jsxs)("span",{className:"text-foreground ml-2 font-medium",children:[x.length," products"]})]})]}),(0,b.jsxs)("div",{className:"bg-secondary/50 rounded-lg p-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-foreground mb-2",children:"Items to Deliver:"}),(0,b.jsx)("div",{className:"space-y-1 text-sm",children:x.map(a=>{let c=d.find(b=>b.id===a.productId);return(0,b.jsxs)("p",{className:"text-muted-foreground",children:[c?.name," - ",a.quantity," ",c?.uom]},a.productId)})})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4 border-t border-border",children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:()=>q(Math.max(1,p-1)),disabled:1===p,className:"flex-1",children:"Back"}),(0,b.jsx)(e.Button,{type:"button",onClick:()=>{p<3?q(p+1):(()=>{if(!r||!t||x.some(a=>!a.productId||a.quantity<=0))return alert("Please fill in all required fields");let b=h({date:v,customer:r,status:"Done",items:x,totalItems:x.length,notes:z});x.forEach(a=>{d.find(b=>b.id===a.productId)&&(o(a.productId,"main-warehouse",a.quantity,"subtract"),i({date:v,type:"delivery",referenceId:b,productId:a.productId,quantity:-a.quantity,fromLocation:"main-warehouse",toLocation:"customer",notes:`Delivered to ${r}`}))}),alert("Delivery created successfully!"),a()})()},className:"flex-1",children:3===p?"Create Delivery":"Next"})]})]})]})})}var p=a.i(65733),q=a.i(54161),r=a.i(83497),s=a.i(41675),t=a.i(46842),u=a.i(4720),v=a.i(71931),w=a.i(84505);function x({delivery:a,onClose:f}){let{products:g}=(0,c.useStore)();return(0,b.jsx)(p.Dialog,{open:!0,onOpenChange:f,children:(0,b.jsxs)(p.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(p.DialogHeader,{children:(0,b.jsxs)(p.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(u.FileText,{className:"w-5 h-5"}),"Delivery Details"]})}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(d.Card,{className:"p-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold",children:["#",a.id.slice(0,8)]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Delivery ID"})]}),(0,b.jsx)(q.Badge,{variant:"secondary",className:(a=>{switch(a){case"Done":return"bg-green-500/20 text-green-600 dark:text-green-400";case"Waiting":case"Ready":return"bg-yellow-500/20 text-yellow-600 dark:text-yellow-400";case"Draft":default:return"bg-gray-500/20 text-gray-600 dark:text-gray-400";case"Canceled":return"bg-red-500/20 text-red-600 dark:text-red-400"}})(a.status),children:a.status})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(t.User,{className:"w-4 h-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.customer}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Customer"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Calendar,{className:"w-4 h-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.date}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Delivery Date"})]})]})]})]}),(0,b.jsxs)(d.Card,{className:"p-4",children:[(0,b.jsxs)("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[(0,b.jsx)(r.Package,{className:"w-4 h-4"}),"Items (",a.totalItems,")"]}),(0,b.jsx)("div",{className:"space-y-3",children:a.items.map((a,c)=>{let d=g.find(b=>b.id===a.productId);return(0,b.jsxs)("div",{className:"flex justify-between items-center p-3 bg-secondary/30 rounded-lg",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium",children:d?.name||"Unknown Product"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["SKU: ",d?.sku||"N/A"]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("p",{className:"font-semibold",children:[a.quantity," ",d?.uom||""]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Quantity"})]})]},c)})})]}),(0,b.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,b.jsxs)(e.Button,{variant:"outline",onClick:()=>{let b=new Blob([`
DELIVERY DETAILS
================

Delivery ID: ${a.id}
Customer: ${a.customer}
Date: ${a.date}
Status: ${a.status}
Total Items: ${a.totalItems}

ITEMS:
------
${a.items.map(a=>{let b=g.find(b=>b.id===a.productId);return`${b?.name||"Unknown Product"} - ${a.quantity} ${b?.uom||""}`}).join("\n")}

Generated on: ${new Date().toLocaleString()}
    `],{type:"text/plain"}),c=URL.createObjectURL(b),d=document.createElement("a");d.href=c,d.download=`delivery-${a.id.slice(0,8)}.txt`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(c)},className:"gap-2",children:[(0,b.jsx)(w.Download,{className:"w-4 h-4"}),"Download"]}),(0,b.jsxs)(e.Button,{variant:"outline",onClick:()=>{window.print()},className:"gap-2",children:[(0,b.jsx)(v.Printer,{className:"w-4 h-4"}),"Print"]}),(0,b.jsx)(e.Button,{onClick:f,children:"Close"})]})]})]})})}function y(){let{deliveries:a}=(0,c.useStore)(),[k,l]=(0,j.useState)(""),[m,n]=(0,j.useState)(!1),[p,r]=(0,j.useState)(null),s=a.filter(a=>a.id.toLowerCase().includes(k.toLowerCase())||a.customer.toLowerCase().includes(k.toLowerCase())),t={total:a.length,done:a.filter(a=>"Done"===a.status).length,ready:a.filter(a=>"Ready"===a.status).length,totalItems:a.reduce((a,b)=>a+b.totalItems,0)};return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Deliveries"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Outgoing stock shipments to customers"})]}),(0,b.jsxs)(e.Button,{onClick:()=>n(!0),className:"gap-2",children:[(0,b.jsx)(g.Plus,{className:"w-4 h-4"}),"New Delivery"]})]}),(0,b.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,b.jsxs)(d.Card,{className:"p-4 border border-border bg-card/50",children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Total Deliveries"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-foreground mt-1",children:t.total})]}),(0,b.jsxs)(d.Card,{className:"p-4 border border-border bg-card/50",children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Completed"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:t.done})]}),(0,b.jsxs)(d.Card,{className:"p-4 border border-border bg-card/50",children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Ready to Ship"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1",children:t.ready})]}),(0,b.jsxs)(d.Card,{className:"p-4 border border-border bg-card/50",children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Total Items"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-foreground mt-1",children:t.totalItems})]})]}),(0,b.jsxs)(d.Card,{className:"p-6 border border-border bg-card/50",children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsxs)("div",{className:"flex-1 relative max-w-sm",children:[(0,b.jsx)(h.Search,{className:"absolute left-3 top-3 w-5 h-5 text-muted-foreground"}),(0,b.jsx)(f.Input,{placeholder:"Search by delivery ID or customer...",value:k,onChange:a=>l(a.target.value),className:"pl-10"})]})}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-border",children:[(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Delivery ID"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Customer"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Date"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Items"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Status"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-foreground",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:s.length>0?s.map(a=>(0,b.jsxs)("tr",{className:"border-b border-border hover:bg-secondary/50 transition-colors",children:[(0,b.jsx)("td",{className:"py-3 px-4 font-mono text-xs",children:a.id.slice(0,8)}),(0,b.jsx)("td",{className:"py-3 px-4",children:a.customer}),(0,b.jsx)("td",{className:"py-3 px-4 text-muted-foreground",children:a.date}),(0,b.jsx)("td",{className:"py-3 px-4",children:a.totalItems}),(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsx)(q.Badge,{variant:"secondary",className:(a=>{switch(a){case"Done":return"bg-green-500/20 text-green-600 dark:text-green-400";case"Ready":return"bg-blue-500/20 text-blue-600 dark:text-blue-400";case"Waiting":case"Draft":return"bg-yellow-500/20 text-yellow-600 dark:text-yellow-400";case"Canceled":return"bg-red-500/20 text-red-600 dark:text-red-400";default:return"bg-gray-500/20 text-gray-600 dark:text-gray-400"}})(a.status),children:a.status})}),(0,b.jsx)("td",{className:"py-3 px-4",children:(0,b.jsxs)(e.Button,{variant:"ghost",size:"sm",onClick:()=>r(a),className:"gap-1",children:[(0,b.jsx)(i.Eye,{className:"w-4 h-4"}),"View"]})})]},a.id)):(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:6,className:"py-8 text-center text-muted-foreground",children:"No deliveries found"})})})]})})]}),m&&(0,b.jsx)(o,{onClose:()=>n(!1)}),p&&(0,b.jsx)(x,{delivery:p,onClose:()=>r(null)})]})}a.s(["default",()=>y],69265)}];

//# sourceMappingURL=app_dashboard_deliveries_page_tsx_b8d9c89f._.js.map